"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7760],{52367:(e,t,s)=>{s.d(t,{Z:()=>l});const n={wn:function(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),s=atob(t),n=new Uint8Array(s.length);for(let e=0;e<s.length;++e)n[e]=s.charCodeAt(e);return n}},i={nt:()=>{const e=e=>{const t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t};return e()+e(!0)+e(!0)+e()}};class r{constructor(e,t){this.td="undefined"==typeof window?self:window,this.ed=e,this.nd=t}od(){if("indexedDB"in this.td)return this.td.indexedDB}rd(){try{if(null==this.od())return!1;{const e=this.od().open("Braze IndexedDB Support Test");if(e.onupgradeneeded=()=>e.result.close(),e.onsuccess=()=>e.result.close(),"undefined"!=typeof window){const e=window.chrome||window.browser||window.msBrowser;if(e&&e.runtime&&e.runtime.id)return this.nd.info("Not using IndexedDB for storage because we are running inside an extension"),!1}return!0}}catch(e){return this.nd.info("Not using IndexedDB for storage due to following error: "+e),!1}}sd(e,t){const s=this.od().open(this.ed.dd,this.ed.VERSION);if(null==s)return"function"==typeof t&&t(),!1;const n=this;return s.onupgradeneeded=e=>{n.nd.info("Upgrading indexedDB "+n.ed.dd+" to v"+n.ed.VERSION+"...");const t=e.target.result;for(const e in n.ed.$t)n.ed.$t.hasOwnProperty(e)&&!t.objectStoreNames.contains(n.ed.$t[e])&&t.createObjectStore(n.ed.$t[e])},s.onsuccess=s=>{const i=s.target.result;i.onversionchange=()=>{i.close(),"function"==typeof t&&t(),n.nd.error("Needed to close the database unexpectedly because of an upgrade in another tab")},e(i)},s.onerror=e=>(n.nd.info("Could not open indexedDB "+n.ed.dd+" v"+n.ed.VERSION+": "+e.target.errorCode),"function"==typeof t&&t(),!0),!0}setItem(e,t,s,n,i){if(!this.rd())return"function"==typeof i&&i(),!1;const r=this;return this.sd((o=>{if(!o.objectStoreNames.contains(e))return r.nd.error("Could not store object "+t+" in "+e+" on indexedDB "+r.ed.dd+" - "+e+" is not a valid objectStore"),"function"==typeof i&&i(),void o.close();const a=o.transaction([e],"readwrite");a.oncomplete=()=>o.close();const l=a.objectStore(e).put(s,t);l.onerror=()=>{r.nd.error("Could not store object "+t+" in "+e+" on indexedDB "+r.ed.dd),"function"==typeof i&&i()},l.onsuccess=()=>{"function"==typeof n&&n()}}),i)}getItem(e,t,s){if(!this.rd())return!1;const n=this;return this.sd((i=>{if(!i.objectStoreNames.contains(e))return n.nd.error("Could not retrieve object "+t+" in "+e+" on indexedDB "+n.ed.dd+" - "+e+" is not a valid objectStore"),void i.close();const r=i.transaction([e],"readonly");r.oncomplete=()=>i.close();const o=r.objectStore(e).get(t);o.onerror=()=>{n.nd.error("Could not retrieve object "+t+" in "+e+" on indexedDB "+n.ed.dd)},o.onsuccess=e=>{const t=e.target.result;null!=t&&s(t)}}))}hr(e,t,s){if(!this.rd())return"function"==typeof s&&s(),!1;const n=this;return this.sd((i=>{if(!i.objectStoreNames.contains(e))return n.nd.error("Could not retrieve last record from "+e+" on indexedDB "+n.ed.dd+" - "+e+" is not a valid objectStore"),"function"==typeof s&&s(),void i.close();const r=i.transaction([e],"readonly");r.oncomplete=()=>i.close();const o=r.objectStore(e).openCursor(null,"prev");o.onerror=()=>{n.nd.error("Could not open cursor for "+e+" on indexedDB "+n.ed.dd),"function"==typeof s&&s()},o.onsuccess=e=>{const n=e.target.result;null!=n&&null!=n.value&&null!=n.key?t(n.key,n.value):"function"==typeof s&&s()}}),s)}br(e,t){if(!this.rd())return!1;const s=this;return this.sd((n=>{if(!n.objectStoreNames.contains(e))return s.nd.error("Could not delete record "+t+" from "+e+" on indexedDB "+s.ed.dd+" - "+e+" is not a valid objectStore"),void n.close();const i=n.transaction([e],"readwrite");i.oncomplete=()=>n.close(),i.objectStore(e).delete(t).onerror=()=>{s.nd.error("Could not delete record "+t+" from "+e+" on indexedDB "+s.ed.dd)}}))}Jt(e,t){if(!this.rd())return!1;const s=this;return this.sd((n=>{if(!n.objectStoreNames.contains(e))return s.nd.error("Could not retrieve objects from "+e+" on indexedDB "+s.ed.dd+" - "+e+" is not a valid objectStore"),void n.close();const i=n.transaction([e],"readwrite");i.oncomplete=()=>n.close();const r=i.objectStore(e),o=r.openCursor(),a=[];o.onerror=()=>{a.length>0?(s.nd.info("Cursor closed midway through for "+e+" on indexedDB "+s.ed.dd),t(a)):s.nd.error("Could not open cursor for "+e+" on indexedDB "+s.ed.dd)},o.onsuccess=e=>{const s=e.target.result;null!=s?(null!=s.value&&null!=s.key&&(r.delete(s.key).onsuccess=()=>{a.push(s.value)}),s.continue()):a.length>0&&t(a)}}))}clearData(){if(!this.rd())return!1;const e=[];for(const t in this.ed.$t)this.ed.$t.hasOwnProperty(t)&&this.ed.$t[t]!==this.ed.$t.oe&&e.push(this.ed.$t[t]);const t=this;return this.sd((function(s){const n=s.transaction(e,"readwrite");n.oncomplete=()=>s.close();for(let s=0;s<e.length;s++){const i=e[s];n.objectStore(i).clear().onerror=function(){t.nd.error("Could not clear "+this.source.name+" on indexedDB "+t.ed.dd)}}n.onerror=function(){t.nd.error("Could not clear object stores on indexedDB "+t.ed.dd)}}))}}r.ep={Ft:{dd:"AppboyServiceWorkerAsyncStorage",VERSION:6,$t:{Ol:"data",jr:"pushClicks",cu:"pushSubscribed",ud:"fallbackDevice",Mt:"cardUpdates",oe:"optOut",$r:"pendingData",Mn:"sdkAuthenticationSignature"},se:1}};const o={init:function(e){void 0===e&&void 0!==o.zg||(o.zg=!!e),o.Eg||(o.Eg=!0)},destroy:function(){o.Eg=!1,o.zg=void 0,o.nd=void 0},setLogger:function(e){"function"==typeof e?(o.init(),o.nd=e):o.info("Ignoring setLogger call since logger is not a function")},toggleLogging:function(){o.init(),o.zg?(console.log("Disabling Braze logging"),o.zg=!1):(console.log("Enabled Braze logging"),o.zg=!0)},info:function(e){if(o.zg){const t="Braze: "+e;null!=o.nd?o.nd(t):console.log(t)}},warn:function(e){if(o.zg){const t="Braze SDK Warning: "+e+" (v4.7.0)";null!=o.nd?o.nd(t):console.warn(t)}},error:function(e){if(o.zg){const t="Braze SDK Error: "+e+" (v4.7.0)";null!=o.nd?o.nd(t):console.error(t)}}},a=o,l={yn:n,A:{CustomEvent:"ce",Pr:"p",Nl:"pc",cc:"ca",qa:"i",qs:"ie",T:"cci",W:"ccic",_:"ccc",L:"ccd",yh:"ss",wh:"se",Mi:"si",Ii:"sc",Ai:"sbc",Ze:"sfe",ro:"iec",Ml:"lr",Rl:"uae",U:"ci",F:"cc",Ul:"lcaa",Il:"lcar",Fn:"inc",Un:"add",En:"rem",Sn:"set",An:"ncam",xl:"sgu"},Ar:{qr:"feed_displayed",dc:"content_cards_displayed"},it:i,qt:r,xt:r.ep,D:a,Wo:{Yn:"allowCrawlerActivity",Xn:"baseUrl",Zn:"noCookies",ho:"devicePropertyAllowlist",ta:"disablePushTokenMaintenance",po:"enableLogging",Eo:"enableSdkAuthentication",ia:"manageServiceWorkerExternally",_o:"minimumIntervalBetweenTriggerActionsInSeconds",Io:"sessionTimeoutInSeconds",Ao:"appVersion",na:"serviceWorkerLocation",ra:"safariWebsitePushId",jn:"localization",ao:"contentSecurityNonce",So:"enableHtmlInAppMessages",No:"allowUserSuppliedJavascript",no:"inAppMessageZIndex",lo:"openInAppMessagesInNewTab",en:"openNewsFeedCardsInNewTab",Ih:"requireExplicitInAppMessageDismissal",wo:"doNotLoadFontAwesome",To:"sdkFlavor",tn:"openCardsInNewTab"}}},77529:(e,t,s)=>{s.d(t,{Z:()=>d});var n=s(85563),i=s(39179),r=s(24673),o=s(52367),a=s(45966);class l{constructor(e,t,s){this.h=e,this.j=t,this.v=s}C(e,t){const s=new r.Z;if(e.k(),null==e.url||""===e.url)return o.Z.D.info(`Card ${e.id} has no url. Not logging click to Braze servers.`),s;if(t){const t=this.h.I(a.I.q.$)||{};t[e.id]=!0,this.h.B(a.I.q.$,t)}const n=this.N([e]);if(null==n)return s;const l=t?o.Z.A._:o.Z.A.F;return i.Z.G(l,n)}H(e){const t=new r.Z;if(!e.J())return o.Z.D.info(`Card ${e.id} refused this dismissal. Ignoring analytics event.`),t;const s=this.h.I(a.I.q.K)||{};s[e.id]=!0,this.h.B(a.I.q.K,s);const n=this.N([e]);return null==n?t:i.Z.G(o.Z.A.L,n)}M(e,t){const s=new r.Z(!0),l=[],u=[];let c;c=t?this.h.I(a.I.q.O)||{}:this.h.I(a.I.q.P)||{};for(const t of e)t.R(),t instanceof n.Z?u.push(t):l.push(t),c[t.id]=!0;const d=this.N(l),h=this.N(u);if(null==d&&null==h)return s.S=!1,s;if(t?this.h.B(a.I.q.O,c):this.h.B(a.I.q.P,c),null!=d){const e=t?o.Z.A.T:o.Z.A.U,n=i.Z.G(e,d);s.V(n)}if(null!=h&&t){const e=i.Z.G(o.Z.A.W,h);s.V(e)}return s}N(e){let t=null;for(let s=0;s<e.length;s++)null!=e[s].id&&""!==e[s].id&&(t=t||{},t.ids=t.ids||[],t.ids.push(e[s].id));return t}}var u=s(59463);const c={t:!1,i:null,m:()=>(c.o(),c.i||(c.i=new l(u.ZP.l(),u.ZP.g(),u.ZP.p())),c.i),o:()=>{c.t||(u.ZP.u(c),c.t=!0)},destroy:()=>{c.i=null,c.t=!1}},d=c},35608:(e,t,s)=>{s.d(t,{ql:()=>l,Ji:()=>u,rW:()=>c,Zw:()=>d,pq:()=>h,sv:()=>p,CG:()=>f,Dj:()=>m});var n=s(5242),i=s(11507),r=s(40420),o=s(22080),a=s(52367);function l(e){return null!=e&&!!e.getAttribute("data-ab-had-top-impression")}function u(e){null!=e&&e.setAttribute("data-ab-had-top-impression",!0)}function c(e){return null!=e&&!!e.getAttribute("data-ab-had-bottom-impression")}function d(e){null!=e&&e.setAttribute("data-ab-had-bottom-impression",!0)}function h(e){if(null!=e){const t=e.querySelectorAll(".ab-unread-indicator")[0];null!=t&&(t.className+=" read")}}function p(e){return e.getAttribute("data-ab-card-id")}function f(e,t){const s=t.querySelectorAll(".ab-image-area");let n,i=0;s.length>0&&(i=s[0].offsetWidth);for(const t of e)if(n=t.X,n&&t.imageUrl&&!isNaN(t.aspectRatio)){const e=i/t.aspectRatio;e&&(n.style.height=`${e}px`)}}function m(e,t,s){const l=document.createElement("div");l.className="ab-card ab-effect-card "+e.Y,l.setAttribute("data-ab-card-id",e.id),l.setAttribute("role","article"),l.setAttribute("tabindex","0");const u=e.url&&""!==e.url,c=n=>(h(l),u&&(t(e),(0,r.S)(e.url,n,s)),!1);if(e.pinned){const e=document.createElement("div");e.className="ab-pinned-indicator";const t=document.createElement("i");t.className="fa fa-star",e.appendChild(t),l.appendChild(e)}if(e.imageUrl&&""!==e.imageUrl){const t=document.createElement("div");t.className="ab-image-area";const s=document.createElement("img");if(s.setAttribute("src",e.imageUrl),s.onload=()=>{l.style.height="auto"},function(e,t){let s="";e.title||e.description||(s="Feed Image"),t.setAttribute("alt",s)}(e,s),t.appendChild(s),l.className+=" with-image",u&&!e.Z){const s=document.createElement("a");s.setAttribute("href",e.url),s.onclick=c,s.appendChild(t),l.appendChild(s)}else l.appendChild(t)}const d=document.createElement("div");if(d.className="ab-card-body",e.dismissible){e.tt=()=>(0,o.K)(e);const t=(0,n.B)("Dismiss Card",void 0,e.dismissCard.bind(e));l.appendChild(t),(0,i.FZ)(d,i.mQ.ot,(e=>{l.className+=" ab-swiped-left",t.onclick(e)})),(0,i.FZ)(d,i.mQ.et,(e=>{l.className+=" ab-swiped-right",t.onclick(e)}))}const p=e.title&&""!==e.title;if(p){const t=document.createElement("h1");if(t.className="ab-title",t.id=a.Z.it.nt(),l.setAttribute("aria-labelledby",t.id),u){const s=document.createElement("a");s.setAttribute("href",e.url),s.onclick=c,s.appendChild(document.createTextNode(e.title)),t.appendChild(s)}else t.appendChild(document.createTextNode(e.title));d.appendChild(t)}const f=document.createElement("div");if(f.className=p?"ab-description":"ab-description ab-no-title",f.id=a.Z.it.nt(),l.setAttribute("aria-describedby",f.id),f.appendChild(document.createTextNode(e.description)),u){const t=document.createElement("div");t.className="ab-url-area";const s=document.createElement("a");s.setAttribute("href",e.url),s.appendChild(document.createTextNode(e.linkText)),s.onclick=c,t.appendChild(s),f.appendChild(t)}d.appendChild(f),l.appendChild(d);const m=document.createElement("div");return m.className="ab-unread-indicator",e.viewed&&(m.className+=" read"),l.appendChild(m),e.X=l,l}},1280:(e,t,s)=>{s.d(t,{d:()=>l});var n=s(72857),i=s(77529),r=s(27671),o=s(59463),a=s(52367);function l(e,t){return!!o.ZP.rr()&&(e instanceof n.Z?i.Z.m().C(e,t).S:(a.Z.D.error("card "+r.U4),!1))}},22080:(e,t,s)=>{s.d(t,{K:()=>l});var n=s(72857),i=s(77529),r=s(27671),o=s(59463),a=s(52367);function l(e){return!!o.ZP.rr()&&(e instanceof n.Z?i.Z.m().H(e).S:(a.Z.D.error("card "+r.U4),!1))}},11066:(e,t,s)=>{s.d(t,{p:()=>u});var n=s(72857),i=s(77529),r=s(59463),o=s(72893),a=s(27671),l=s(52367);function u(e,t){if(!r.ZP.rr())return!1;if(!(0,o.kJ)(e))return l.Z.D.error("cards must be an array"),!1;for(const t of e)if(!(t instanceof n.Z))return l.Z.D.error(`Each card in cards ${a.U4}`),!1;return i.Z.m().M(e,t).S}},17283:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(72857);class i extends n.Z{constructor(e,t,s,n,i,r,o,a,l,u,c,d,h,p){super(e,t,null,s,null,n,i,r,o,a,l,u,c,d,h,p),this.Y="ab-banner",this.Z=!1}ss(){const e={};return e[n.Z.hs.ts]=n.Z.es.rs,e[n.Z.hs.ns]=this.id,e[n.Z.hs.ls]=this.viewed,e[n.Z.hs.os]=this.imageUrl,e[n.Z.hs.us]=this.updated,e[n.Z.hs.cs]=this.created,e[n.Z.hs.ds]=this.categories,e[n.Z.hs.ps]=this.expiresAt,e[n.Z.hs.URL]=this.url,e[n.Z.hs.bs]=this.linkText,e[n.Z.hs.fs]=this.aspectRatio,e[n.Z.hs.xs]=this.extras,e[n.Z.hs.js]=this.pinned,e[n.Z.hs.zs]=this.dismissible,e[n.Z.hs.gs]=this.clicked,e[n.Z.hs.ks]=this.test,e}}},5383:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(72857);class i extends n.Z{constructor(e,t,s,n,i,r,o,a,l,u,c,d,h,p,f,m){super(e,t,s,n,i,r,o,a,l,u,c,d,h,p,f,m),this.Y="ab-captioned-image",this.Z=!0}ss(){const e={};return e[n.Z.hs.ts]=n.Z.es.st,e[n.Z.hs.ns]=this.id,e[n.Z.hs.ls]=this.viewed,e[n.Z.hs.ht]=this.title,e[n.Z.hs.os]=this.imageUrl,e[n.Z.hs.rt]=this.description,e[n.Z.hs.us]=this.updated,e[n.Z.hs.cs]=this.created,e[n.Z.hs.ds]=this.categories,e[n.Z.hs.ps]=this.expiresAt,e[n.Z.hs.URL]=this.url,e[n.Z.hs.bs]=this.linkText,e[n.Z.hs.fs]=this.aspectRatio,e[n.Z.hs.xs]=this.extras,e[n.Z.hs.js]=this.pinned,e[n.Z.hs.zs]=this.dismissible,e[n.Z.hs.gs]=this.clicked,e[n.Z.hs.ks]=this.test,e}}},72857:(e,t,s)=>{s.d(t,{Z:()=>o});var n=s(57750),i=s(27671),r=s(74663);class o{constructor(e,t,s,n,i,r,o,a,l,u,c,d,h,p,f,m){this.id=e,this.viewed=t||!1,this.title=s||"",this.imageUrl=n,this.description=i||"",this.created=r||null,this.updated=o||null,this.categories=a||[],this.expiresAt=l||null,this.url=u,this.linkText=c,d=parseFloat(d),this.aspectRatio=isNaN(d)?null:d,this.extras=h,this.pinned=p||!1,this.dismissible=f||!1,this.dismissed=!1,this.clicked=m||!1,this.isControl=!1,this.test=!1,this.lt=null,this.Et=null}subscribeToClickedEvent(e){return this.Tt().ut(e)}subscribeToDismissedEvent(e){return this.It().ut(e)}removeSubscription(e){this.Tt().removeSubscription(e),this.It().removeSubscription(e)}removeAllSubscriptions(){this.Tt().removeAllSubscriptions(),this.It().removeAllSubscriptions()}dismissCard(){if(this.dismissible&&!this.dismissed){this.tt&&this.tt(this);var e=this.X;e&&(e.style.height=e.offsetHeight+"px",e.className=e.className+" ab-hide",setTimeout((function(){e&&e.parentNode&&(e.style.height="0",e.style.margin="0",setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),o.Nt))}),i.rF))}}Tt(){return null==this.lt&&(this.lt=new r.Z),this.lt}It(){return null==this.Et&&(this.Et=new r.Z),this.Et}R(){this.viewed=!0}k(){this.viewed=!0,this.clicked=!0,this.Tt().St()}J(){return!(!this.dismissible||this.dismissed||(this.dismissed=!0,this.It().St(),0))}ct(e){if(null==e||e[o.At.ns]!==this.id)return!0;if(e[o.At.Dt])return!1;if(null!=e[o.At.us]&&null!=this.updated&&e[o.At.us]<(0,n.FX)(this.updated.valueOf()))return!0;if(e[o.At.ls]&&!this.viewed&&(this.viewed=!0),e[o.At.gs]&&!this.clicked&&(this.clicked=e[o.At.gs]),null!=e[o.At.ht]&&(this.title=e[o.At.ht]),null!=e[o.At.os]&&(this.imageUrl=e[o.At.os]),null!=e[o.At.rt]&&(this.description=e[o.At.rt]),null!=e[o.At.us]){const t=(0,n.X2)(e[o.At.us]);null!=t&&(this.updated=t)}if(null!=e[o.At.ps]){let t;t=e[o.At.ps]===o.Ct?null:(0,n.X2)(e[o.At.ps]),this.expiresAt=t}if(null!=e[o.At.URL]&&(this.url=e[o.At.URL]),null!=e[o.At.bs]&&(this.linkText=e[o.At.bs]),null!=e[o.At.fs]){const t=parseFloat(e[o.At.fs]);this.aspectRatio=isNaN(t)?null:t}return null!=e[o.At.xs]&&(this.extras=e[o.At.xs]),null!=e[o.At.js]&&(this.pinned=e[o.At.js]),null!=e[o.At.zs]&&(this.dismissible=e[o.At.zs]),null!=e[o.At.ks]&&(this.test=e[o.At.ks]),!0}}o.Ct=-1,o.es={st:"captioned_image",dt:"text_announcement",Rt:"short_news",rs:"banner_image",_t:"control"},o.At={ns:"id",ls:"v",zs:"db",Dt:"r",us:"ca",js:"p",ps:"ea",xs:"e",ts:"tp",os:"i",ht:"tt",rt:"ds",URL:"u",bs:"dm",fs:"ar",gs:"cl",ks:"t"},o.hs={ns:"id",ls:"v",zs:"db",cs:"cr",us:"ca",js:"p",ds:"t",ps:"ea",xs:"e",ts:"tp",os:"i",ht:"tt",rt:"ds",URL:"u",bs:"dm",fs:"ar",gs:"cl",ks:"s"},o.Lt={Ot:"ADVERTISING",bt:"ANNOUNCEMENTS",ft:"NEWS",Pt:"SOCIAL"},o.Nt=400},37653:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(72857);class i extends n.Z{constructor(e,t,s,n,i,r,o,a,l,u,c,d,h,p,f,m){super(e,t,s,n,i,r,o,a,l,u,c,d,h,p,f,m),this.Y="ab-classic-card",this.Z=!0}ss(){const e={};return e[n.Z.hs.ts]=n.Z.es.Rt,e[n.Z.hs.ns]=this.id,e[n.Z.hs.ls]=this.viewed,e[n.Z.hs.ht]=this.title,e[n.Z.hs.os]=this.imageUrl,e[n.Z.hs.rt]=this.description,e[n.Z.hs.us]=this.updated,e[n.Z.hs.cs]=this.created,e[n.Z.hs.ds]=this.categories,e[n.Z.hs.ps]=this.expiresAt,e[n.Z.hs.URL]=this.url,e[n.Z.hs.bs]=this.linkText,e[n.Z.hs.fs]=this.aspectRatio,e[n.Z.hs.xs]=this.extras,e[n.Z.hs.js]=this.pinned,e[n.Z.hs.zs]=this.dismissible,e[n.Z.hs.gs]=this.clicked,e[n.Z.hs.ks]=this.test,e}}},85563:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(72857);class i extends n.Z{constructor(e,t,s,n,i,r){super(e,t,null,null,null,null,s,null,n,null,null,null,i,r,null),this.isControl=!0,this.Y="ab-control-card",this.Z=!1}ss(){const e={};return e[n.Z.hs.ts]=n.Z.es._t,e[n.Z.hs.ns]=this.id,e[n.Z.hs.ls]=this.viewed,e[n.Z.hs.us]=this.updated,e[n.Z.hs.ps]=this.expiresAt,e[n.Z.hs.xs]=this.extras,e[n.Z.hs.js]=this.pinned,e[n.Z.hs.ks]=this.test,e}}},23756:(e,t,s)=>{s.d(t,{xA:()=>d,D5:()=>h,rN:()=>p});var n=s(72857),i=s(37653),r=s(5383),o=s(17283),a=s(85563),l=s(57750),u=s(52367);function c(e,t,s,l,c,d,h,p,f,m,g,Z,b,A,v,y,S,E){let C;if(t===n.Z.es.dt||t===n.Z.es.Rt)C=new i.Z(e,s,l,c,d,h,p,f,m,g,Z,b,A,v,y,S);else if(t===n.Z.es.st)C=new r.Z(e,s,l,c,d,h,p,f,m,g,Z,b,A,v,y,S);else if(t===n.Z.es.rs)C=new o.Z(e,s,c,h,p,f,m,g,Z,b,A,v,y,S);else{if(t!==n.Z.es._t)return u.Z.D.error("Ignoring card with unknown type "+t),null;C=new a.Z(e,s,p,m,A,v)}return E&&(C.test=E),C}function d(e){if(e[n.Z.At.Dt])return null;const t=e[n.Z.At.ns],s=e[n.Z.At.ts],i=e[n.Z.At.ls],r=e[n.Z.At.ht],o=e[n.Z.At.os],a=e[n.Z.At.rt],u=(0,l.X2)(e[n.Z.At.us]),d=u;let h;return h=e[n.Z.At.ps]===n.Z.Ct?null:(0,l.X2)(e[n.Z.At.ps]),c(t,s,i,r,o,a,d,u,null,h,e[n.Z.At.URL],e[n.Z.At.bs],e[n.Z.At.fs],e[n.Z.At.xs],e[n.Z.At.js],e[n.Z.At.zs],e[n.Z.At.gs],e[n.Z.At.ks]||!1)}function h(e){return c(e.id,e.type,e.viewed,e.title,e.image,e.description,(0,l.X2)(e.created),(0,l.X2)(e.updated),e.categories,(0,l.X2)(e.expires_at),e.url,e.domain,e.aspect_ratio,e.extras,!1,!1)}function p(e){return c(e[n.Z.hs.ns],e[n.Z.hs.ts],e[n.Z.hs.ls],e[n.Z.hs.ht],e[n.Z.hs.os],e[n.Z.hs.rt],(0,l.Rd)(e[n.Z.hs.cs]),(0,l.Rd)(e[n.Z.hs.us]),e[n.Z.hs.ds],(0,l.Rd)(e[n.Z.hs.ps]),e[n.Z.hs.URL],e[n.Z.hs.bs],e[n.Z.hs.fs],e[n.Z.hs.xs],e[n.Z.hs.js],e[n.Z.hs.zs],e[n.Z.hs.gs],e[n.Z.hs.ks]||!1)||void 0}},34790:(e,t,s)=>{s.r(t),s.d(t,{changeUser:()=>l});var n=s(59463),i=s(8548),r=s(52367),o=s(17615),a=s(3905);function l(e,t){return!!n.ZP.rr()&&(null==e||0===e.length||e!=e?(r.Z.D.error("changeUser requires a non-empty userId."),!1):(0,i.E)(e)>o.Z.ee?(r.Z.D.error(`Rejected user id "${e}" because it is longer than ${o.Z.ee} bytes.`),!1):!(null!=t&&!(0,a.ro)(t,"set signature for new user","signature"))&&void n.ZP.mr().changeUser(e.toString(),n.ZP.re(),t))}},12017:(e,t,s)=>{s.d(t,{Z:()=>n});const n={BROWSER:"browser",BROWSER_VERSION:"browserVersion",OS:"os",RESOLUTION:"resolution",LANGUAGE:"language",TIME_ZONE:"timeZone",USER_AGENT:"userAgent"}},46243:(e,t,s)=>{s.d(t,{P:()=>i});var n=s(59463);function i(){if(n.ZP.rr())return n.ZP.gr()}},40420:(e,t,s)=>{s.d(t,{S:()=>u,h:()=>c});var n=s(52367),i=s(59463),r=s(73046),o=s(3905),a=s(75319),l=s(46243);function u(e,t,u){if(i.ZP.rr())if(o.y9.test(e)){const t=(0,r.OL)(e);if(!t)return;const i=e=>{if(!(0,o.zR)(e))return void n.Z.D.error(`Decoded Braze Action json is invalid: ${JSON.stringify(e,null,2)}`);const t=e[r.A9.properties.type];if(t===r.A9.types.ue)for(const t of e[r.A9.properties.me])i(t);else{const i=e[r.A9.properties.fe];let o;switch(t){case r.A9.types.logCustomEvent:Promise.resolve().then(s.bind(s,61454)).then((({logCustomEvent:e})=>{e.apply(null,Array.prototype.slice.call(i))}));break;case r.A9.types.requestPushPermission:Promise.resolve().then(s.bind(s,12261)).then((({requestPushPermission:e})=>{e()}));break;case r.A9.types.setEmailNotificationSubscriptionType:case r.A9.types.setPushNotificationSubscriptionType:case r.A9.types.setCustomUserAttribute:case r.A9.types.addToSubscriptionGroup:case r.A9.types.removeFromSubscriptionGroup:case r.A9.types.addToCustomAttributeArray:case r.A9.types.removeFromCustomAttributeArray:o=(0,l.P)(),o[t].apply(o,Array.prototype.slice.call(i));break;case r.A9.types.de:case r.A9.types.pe:a.SD.openUri.apply(null,Array.prototype.slice.call(i));break;default:n.Z.D.info(`Ignoring unknown Braze Action: ${t}`)}}};i(t)}else a.SD.openUri(e,u,t)}function c(e,t){u(e,t)}},61454:(e,t,s)=>{s.r(t),s.d(t,{logCustomEvent:()=>c});var n=s(59463),i=s(39179),r=s(52367),o=s(24365),a=s(22385),l=s(3905),u=s(27671);function c(e,t){if(!n.ZP.rr())return!1;if(null==e||e.length<=0)return r.Z.D.error(`logCustomEvent requires a non-empty eventName, got "${e}". Ignoring event.`),!1;if(!(0,l.zM)(e,"log custom event","the event name"))return!1;const[s,c]=(0,l.lg)(t,u._P,"eventProperties",`log custom event "${e}"`,"event");if(!s)return!1;if(n.ZP.ir().ge(e))return r.Z.D.info(`Custom Event "${e}" is blocklisted, ignoring.`),!1;const d=i.Z.G(r.Z.A.CustomEvent,{n:e,p:c});if(d.S){r.Z.D.info(`Logged custom event "${e}".`);for(const s of d.ve)a.n.er().je(o.Z.be,[e,t],s)}return d.S}},61364:(e,t,s)=>{s.r(t),s.d(t,{logPurchase:()=>c});var n=s(59463),i=s(27671),r=s(52367),o=s(24365),a=s(22385),l=s(3905),u=s(39179);function c(e,t,s,c,d){if(!n.ZP.rr())return!1;if(null==s&&(s="USD"),null==c&&(c=1),null==e||e.length<=0)return r.Z.D.error(`logPurchase requires a non-empty productId, got "${e}", ignoring.`),!1;if(!(0,l.zM)(e,"log purchase","the purchase name"))return!1;let h=parseFloat(t);if(isNaN(h))return r.Z.D.error(`logPurchase requires a numeric price, got ${t}, ignoring.`),!1;h=h.toFixed(2);const p=parseInt(c);if(isNaN(p))return r.Z.D.error(`logPurchase requires an integer quantity, got ${c}, ignoring.`),!1;if(p<1||p>i.Fz)return r.Z.D.error(`logPurchase requires a quantity >1 and <${i.Fz}, got ${p}, ignoring.`),!1;if(s=s.toUpperCase(),-1===["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BRL","BSD","BTC","BTN","BWP","BYR","BZD","CAD","CDF","CHF","CLF","CLP","CNY","COP","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EEK","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GGP","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","IMP","INR","IQD","IRR","ISK","JEP","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTL","LVL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MTL","MUR","MVR","MWK","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XCD","XDR","XOF","XPD","XPF","XPT","YER","ZAR","ZMK","ZMW","ZWL"].indexOf(s))return r.Z.D.error(`logPurchase requires a valid currencyCode, got ${s}, ignoring.`),!1;const[f,m]=(0,l.lg)(d,"logPurchase","purchaseProperties",`log purchase "${e}"`,"purchase");if(!f)return!1;if(n.ZP.ir().Dr(e))return r.Z.D.info(`Purchase "${e}" is blocklisted, ignoring.`),!1;const g=u.Z.G(r.Z.A.Pr,{pid:e,c:s,p:h,q:p,pr:m});if(g.S){r.Z.D.info(`Logged ${p} purchase${p>1?"s":""} of "${e}" for ${s} ${h}.`);for(const t of g.ve)a.n.er().je(o.Z.Rr,[e,d],t)}return g.S}},18503:(e,t,s)=>{s.d(t,{A:()=>i});var n=s(59463);function i(e){n.ZP.rr()&&n.ZP.removeSubscription(e)}},64650:(e,t,s)=>{s.r(t),s.d(t,{requestImmediateDataFlush:()=>i});var n=s(59463);function i(e){n.ZP.rr()&&n.ZP.mr().requestImmediateDataFlush(e)}},12962:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(52367);class i{constructor(e,t=!1,s={}){this.id=e,this.enabled=t,this.properties=s,this.id=e,this.enabled=t,this.properties=s}getStringProperty(e){const t=this.properties[e];return null==t?(this.yr(e),null):this.Er(t)?t.value:(this.Br("string"),null)}getNumberProperty(e){const t=this.properties[e];return null==t?(this.yr(e),null):this.Ir(t)?t.value:(this.Br("number"),null)}getBooleanProperty(e){const t=this.properties[e];return null==t?(this.yr(e),null):this.Nr(t)?t.value:(this.Br("boolean"),null)}ss(){const e={};return e[i.hs.ns]=this.id,e[i.hs.Fe]=this.enabled,e[i.hs.we]=this.properties,e}Br(e){n.Z.D.info(`Property is not of type ${e}.`)}yr(e){n.Z.D.info(`${e} not found in feature flag properties.`)}Er(e){return"string"===e.type&&"string"==typeof e.value}Ir(e){return"number"===e.type&&"number"==typeof e.value}Nr(e){return"boolean"===e.type&&"boolean"==typeof e.value}}i.hs={ns:"id",Fe:"e",we:"pr"},i.At={ns:"id",Fe:"enabled",we:"properties"}},12611:(e,t,s)=>{s.d(t,{Z:()=>m});var n=s(59463),i=s(52367),r=s(40158),o=s(45966),a=s(74663),l=s(96504),u=s(41843),c=s(12962);function d(e){if(e[c.Z.At.ns]&&"boolean"==typeof e[c.Z.At.Fe])return new c.Z(e[c.Z.At.ns],e[c.Z.At.Fe],e[c.Z.At.we]);i.Z.D.info(`Unable to create feature flag from ${JSON.stringify(e,null,2)}`)}function h(e){if(e[c.Z.hs.ns]&&"boolean"==typeof e[c.Z.hs.Fe])return new c.Z(e[c.Z.hs.ns],e[c.Z.hs.Fe],e[c.Z.hs.we]);i.Z.D.info(`Unable to deserialize feature flag from ${JSON.stringify(e,null,2)}`)}class p extends r.Z{constructor(e,t,s){super(),this.si=e,this.ei=t,this.ri=s,this.hi=[],this.oi=0,this.si=e,this.ei=t,this.ri=s,this.ni=null,this.ai=new a.Z,this.fi=10,this.ui=null,this.li=null,n.ZP.jt(this.ai)}Rs(e){if((!this.si||this.si.ci())&&null!=e&&e.feature_flags){this.hi=[];for(const t of e.feature_flags){const e=d(t);e&&this.hi.push(e)}this.oi=(new Date).getTime(),this.mi(),this.ai.St(this.hi)}}pi(){let e={};this.ri&&(e=this.ri.I(o.I.q.di));const t={};for(const s in e){const n=h(e[s]);n&&(t[n.id]=n)}return t}Ws(e){return this.ai.ut(e)}refreshFeatureFlags(e,t,s=!1,n=!0){if(!this.gi(s))return!this.ni&&this.si&&(this.ni=this.si.Fi((()=>{this.refreshFeatureFlags(e,t)}))),void("function"==typeof t&&t());if(n&&this.yi(),!this.ei)return void("function"==typeof t&&t());const i=this.ei.Ps({},!0),r=this.ei.Bs(i,!1,!0);let o=!1;this.ei.Gs(i,(()=>{this.ei?u.Z.Hs({url:`${this.ei.Ks()}/feature_flags/sync`,headers:r,data:i,S:s=>{if(!this.ei.Os(i,s,r))return o=!0,void("function"==typeof t&&t());this.ei.Qs(),this.Rs(s),"function"==typeof e&&e()},error:e=>{this.ei.Vs(e,"retrieving feature flags"),o=!0,"function"==typeof t&&t()},wi:()=>{if(n&&o&&!this.li){let n=this.ui;(null==n||n<1e3*this.fi)&&(n=1e3*this.fi),this.bi(Math.min(3e5,(0,l.R)(1e3*this.fi,3*n)),e,t,s)}}}):"function"==typeof t&&t()}))}yi(){null!=this.li&&(clearTimeout(this.li),this.li=null)}bi(e=1e3*this.fi,t,s,n){this.yi(),this.li=window.setTimeout((()=>{this.refreshFeatureFlags(t,s,n)}),e),this.ui=e}gi(e){if(!this.si)return!1;if(!e){const e=parseFloat(this.si.ji());let t=!1;if(!isNaN(e)){if(-1===e)return i.Z.D.info("Feature flag refreshes not allowed"),!1;t=(new Date).getTime()>=(this.oi||0)+1e3*e}if(!t)return i.Z.D.info(`Feature flag refreshes were rate limited to ${e} seconds`),!1}return this.si.ci()}mi(){if(!this.ri)return;const e={};for(const t of this.hi){const s=t.ss();e[t.id]=s}this.ri.B(o.I.q.di,e),this.ri.B(o.I.q.vi,this.oi)}}const f={t:!1,provider:null,er:()=>(f.o(),f.provider||(f.provider=new p(n.ZP.ir(),n.ZP.nr(),n.ZP.l()),n.ZP.ar(f.provider)),f.provider),o:()=>{f.t||(n.ZP.u(f),f.t=!0)},destroy:()=>{f.provider=null,f.t=!1}},m=f},992:(e,t,s)=>{s.r(t),s.d(t,{refreshFeatureFlags:()=>o,default:()=>a});var n=s(59463),i=s(12611);function r(e,t,s=!1){if(n.ZP.rr())return i.Z.er().refreshFeatureFlags(e,t,s)}function o(e,t){r(e,t)}const a=r},30354:(e,t,s)=>{s.d(t,{Z:()=>h});var n=s(59463),i=s(40158),r=s(83628),o=s(23756),a=s(57750),l=s(45966),u=s(74663);class c extends i.Z{constructor(e,t){super(),this.h=e,this.Ci=t,this.yt=new u.Z,n.ZP.jt(this.yt),this.zt()}zt(){const e=this.h.I(l.I.q.Di)||[],t=[];for(let s=0;s<e.length;s++){const n=(0,o.rN)(e[s]);null!=n&&t.push(n)}this.Zt=t,this._i=(0,a.Rd)(this.h.I(l.I.q.xi))}Si(e){const t=[];let s=null;const n=this.h.I(l.I.q.P)||{},i={};for(let r=0;r<e.length;r++){s=e[r];const a=(0,o.D5)(s);null!=a&&(n[a.id]&&(a.viewed=!0,i[a.id]=!0),t.push(a))}this.h.B(l.I.q.P,i),this.Zt=t,this.Ss(),this._i=new Date,this.h.B(l.I.q.xi,this._i)}Ss(){const e=[];for(let t=0;t<this.Zt.length;t++)e.push(this.Zt[t].ss());this.h.B(l.I.q.Di,e)}Rs(e){null!=e&&e.feed&&(this.zt(),this.Si(e.feed),this.yt.St(new r.Z(this.Zt.slice(),this._i)))}Ti(){this.zt();const e=[],t=new Date;for(let s=0;s<this.Zt.length;s++)(null==this.Zt[s].expiresAt||this.Zt[s].expiresAt>=t)&&e.push(this.Zt[s]);return new r.Z(e,this._i)}Is(){this.Ci.requestFeedRefresh()}Ws(e){return this.yt.ut(e)}clearData(e){null==e&&(e=!1),this.Zt=[],this._i=null,e&&(this.h.Xs(l.I.q.Di),this.h.Xs(l.I.q.xi)),this.yt.St(new r.Z(this.Zt.slice(),this._i))}}const d={t:!1,provider:null,er:()=>(d.o(),d.provider||(d.provider=new c(n.ZP.l(),n.ZP.mr()),n.ZP.ar(d.provider)),d.provider),o:()=>{d.t||(n.ZP.u(d),d.t=!0)},destroy:()=>{d.provider=null,d.t=!1}},h=d},83628:(e,t,s)=>{s.d(t,{Z:()=>a});var n=s(67),i=s(11066),r=s(1280),o=s(83516);class a extends n.Z{constructor(e,t){super(e,t)}logCardImpressions(e){(0,i.p)(e,!1)}logCardClick(e){(0,r.d)(e,!1)}sr(){(0,o.a)()}dr(){return!1}}},46599:(e,t,s)=>{s.d(t,{j:()=>r});var n=s(59463),i=s(52367);function r(){if(n.ZP.rr())return n.ZP.nr().Fr(i.Z.Ar.qr).S}},83516:(e,t,s)=>{s.d(t,{a:()=>r});var n=s(59463),i=s(30354);function r(){if(n.ZP.rr())return i.Z.er().Is()}},96596:(e,t,s)=>{s.d(t,{n:()=>r});var n=s(59463),i=s(30354);function r(e){if(n.ZP.rr())return i.Z.er().Ws(e)}},33545:(e,t,s)=>{s.r(t),s.d(t,{showFeed:()=>p});var n=s(59463),i=s(64095),r=s(83628),o=s(96596),a=s(46599),l=s(30354),u=s(72893),c=s(35608),d=s(46959),h=s(52367);function p(e,t,s){if(!n.ZP.rr())return;(0,d.B)();const p=(e,t)=>{if(null==t)return e;const s=[];for(let e=0;e<t.length;e++)s.push(t[e].toLowerCase());const n=[];for(let t=0;t<e.length;t++){const i=[];for(let s=0;s<e[t].categories.length;s++)i.push(e[t].categories[s].toLowerCase());(0,u.jV)(i,s).length>0&&n.push(e[t])}return n},f=n.ZP.nn(n.JY.tn)||n.ZP.nn(n.JY.en)||!1;let m=!1;null==e&&(e=document.body,m=!0);let g=!1,Z=null;null==t?(Z=l.Z.er().Ti(),(0,i.Of)(Z,p(Z.cards,s),Z.lastUpdated,null,f),g=!0):Z=new r.Z(p(t,s),new Date);const b=(0,i.Yz)(Z,f);if(g){(null==Z.lastUpdated||(new Date).valueOf()-Z.lastUpdated.valueOf()>r.Z.ur)&&(h.Z.D.info(`Cached feed was older than max TTL of ${r.Z.ur} ms, requesting an update from the server.`),(0,i.cV)(Z,b));const e=(new Date).valueOf(),t=(0,o.n)((function(t){const n=b.querySelectorAll(".ab-refresh-button")[0];if(null!=n){let t=500;const s=parseInt(b.getAttribute(i.cP));isNaN(s)?t-=(new Date).valueOf()-e:t-=(new Date).valueOf()-s,setTimeout((function(){n.className=n.className.replace(/fa-spin/g,"")}),Math.max(t,0))}(0,i.Of)(Z,p(t.cards,s),t.lastUpdated,b,f)}));(0,i.GB)(t,b)}const A=e=>{const t=e.querySelectorAll(".ab-feed");let s=null;for(let n=0;n<t.length;n++)t[n].parentNode===e&&(s=t[n]);null!=s?((0,i.tQ)(s),s.parentNode.replaceChild(b,s)):e.appendChild(b),setTimeout((function(){b.className=b.className.replace("ab-hide","ab-show")}),0),m&&b.focus(),(0,a.j)(),(0,i.cz)(Z,b),(0,c.CG)(Z.cards,e)};var v;null!=e?A(e):window.onload=(v=window.onload,function(){"function"==typeof v&&v(),A(document.body)})}},23340:(e,t,s)=>{s.d(t,{q:()=>d});var n=s(1792),i=s(98376),r=s(4410),o=s(31090),a=s(84072),l=s(3811),u=s(26616),c=s(52367);function d(e){if(e.is_control)return i.Z.fromJson(e);let t=e.type;null!=t&&(t=t.toUpperCase());const s=e.message,d=e.text_align_message,h=e.slide_from,p=e.extras,f=e.trigger_id,m=e.click_action,g=e.uri,Z=e.open_target,b=e.message_close,A=e.duration,v=e.icon,y=e.image_url,S=e.image_style,E=e.icon_color,C=e.icon_bg_color,D=e.bg_color,N=e.text_color,P=e.close_btn_color,w=e.header,I=e.text_align_header,T=e.header_text_color,_=e.frame_color,M=[];let k=e.btns;null==k&&(k=[]);for(let e=0;e<k.length;e++)M.push(a.Z.fromJson(k[e]));const O=e.crop_type,U=e.orientation,R=e.animate_in,F=e.animate_out;let x,B=e.html_id,L=e.css;if(null!=B&&""!==B&&null!=L&&""!==L||(B=void 0,L=void 0),t===l.Z.es||t===n.Z.es.Ne)x=new l.Z(s,d,p,f,m,g,Z,b,A,v,y,S,E,C,D,N,P,R,F,w,I,T,_,M,O,B,L);else if(t===r.Z.es)x=new r.Z(s,d,p,f,m,g,Z,b,A,v,y,S,E,C,D,N,P,R,F,w,I,T,_,M,O,U,B,L);else if(t===u.Z.es)x=new u.Z(s,d,h,p,f,m,g,Z,b,A,v,y,E,C,D,N,P,R,F,B,L);else{if(t!==o.Z.es&&t!==n.Z.es.Pe)return void c.Z.D.error("Ignoring message with unknown type "+t);{const t=e.message_fields;x=new o.Z(s,p,f,b,A,R,F,_,B,L,t),x.trusted=e.trusted||!1}}return x.Ce=t,x}},1087:(e,t,s)=>{s.d(t,{Z:()=>S});var n=s(41843),i=s(59463),r=s(98376),o=s(31090),a=s(1792),l=s(84072),u=s(39179),c=s(23340),d=s(96504),h=s(24673),p=s(52367),f=s(74663),m=s(82246),g=s(72893),Z=s(3905),b=s(73046),A=s(74556);class v{constructor(e,t,s,n){this.vt=e,this.j=t,this.h=s,this.v=n,this.Se=new f.Z,i.ZP.jt(this.Se),this.Oe=1e3,this.Re=6e4}Qe(){return this.Se}Ue(e){return this.Se.ut(e)}Ve(){return this.We}Xe(e){this.We=e}Ye(e,t){if(!(0,g.fk)(a.Z.Me,t,`${t} is not a valid in-app message display failure`,"InAppMessage.DisplayFailures"))return new h.Z;const s={trigger_ids:[e],error_code:t};return u.Z.G(p.Z.A.Ze,s)}G(e,t,s,n){const i=new h.Z;let a;if(e instanceof r.Z)a={trigger_ids:[e.triggerId]};else{if(t===p.Z.A.Ii||e instanceof o.Z&&t===p.Z.A.Ai){if(!e.k(n))return p.Z.D.info("This in-app message has already received a click. Ignoring analytics event."),i}else if(t===p.Z.A.Mi&&!e.R())return p.Z.D.info("This in-app message has already received an impression. Ignoring analytics event."),i;a=this.zi(e)}return null==a?i:(null!=s&&(a.bid=s),u.Z.G(t,a))}ki(e,t){const s=new h.Z;if(!e.k())return p.Z.D.info("This in-app message button has already received a click. Ignoring analytics event."),s;const n=this.zi(t);return null==n?s:e.id===l.Z.$i?(p.Z.D.info("This in-app message button does not have a tracking id. Not logging event to Braze servers."),s):(null!=e.id&&(n.bid=e.id),u.Z.G(p.Z.A.Ai,n))}Bi(e){if(!(e instanceof a.Z))return;const t=e=>{const t=(0,b.OL)(e);return(0,b.je)(t)?(0,b.Tu)(b.yi.Ei,"In-App Message"):(0,b.zA)(t)&&!A.Z.Gi()?(0,b.Tu)(b.yi.Ni,"In-App Message"):void 0},s=e.buttons;let n;for(const e of s)if(e.clickAction===a.Z.ClickAction.URI&&Z.y9.test(e.uri)&&(n=t(e.uri),n))return n;return e.clickAction===a.Z.ClickAction.URI&&Z.y9.test(e.uri)?t(e.uri):void 0}qi(e,t,s,i){let r=this.vt.Oi(!1,!1);r=this.vt.Ps(r),r.template={trigger_id:e.triggerId,trigger_event_type:t},null!=s&&(r.template.data=s.Pi());const o=this.vt.Bs(r);this.vt.Gs(r,(()=>{n.Z.Hs({url:`${this.vt.Ks()}/template/`,data:r,headers:o,S:t=>{if(!this.vt.Os(r,t,o))return this.Ye(e.triggerId,a.Z.Me.Ri),void("function"==typeof e.Hi&&e.Hi());if(this.vt.Qs(),null==t||null==t.templated_message)return void this.Ye(e.triggerId,a.Z.Me.Ri);const s=t.templated_message;if(s.type!==m.Z.Ki.Ji)return void this.Ye(e.triggerId,a.Z.Me.Li);const n=(0,c.q)(s.data);if(null==n)return void this.Ye(e.triggerId,a.Z.Me.Li);let i=this.Bi(n);if(i)return p.Z.D.error(i),void("function"==typeof e.Hi&&e.Hi());"function"==typeof e.Qi?e.Qi(n):this.Ye(e.triggerId,a.Z.Me.Ri)},error:n=>{let r=`getting user personalization for message ${e.triggerId}`;if((new Date).valueOf()-e.Ui>e.Vi)this.Ye(e.triggerId,a.Z.Me.Ri);else{const n=Math.min(e.Vi,this.Re),o=this.Oe;null==i&&(i=o);const a=Math.min(n,(0,d.R)(o,3*i));r+=`. Retrying in ${a} ms`,setTimeout((()=>{this.qi(e,t,s,a)}),a)}this.vt.Vs(n,r)}})}))}zi(e){if(null==e.triggerId)return p.Z.D.info("The in-app message has no analytics id. Not logging event to Braze servers."),null;const t={};return null!=e.triggerId&&(t.trigger_ids=[e.triggerId]),t}}const y={_e:null,t:!1,m:()=>(y.o(),y._e||(y._e=new v(i.ZP.nr(),i.ZP.g(),i.ZP.l(),i.ZP.p())),y._e),o:()=>{y.t||(i.ZP.u(y),y.t=!0)},destroy:()=>{y._e=null,y.t=!1}},S=y},98376:(e,t,s)=>{s.d(t,{Z:()=>n});class n{constructor(e){this.triggerId=e,this.extras={},this.isControl=!0}static fromJson(e){return new n(e.trigger_id)}}},4410:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(1792);class i extends n.Z{constructor(e,t,s,i,r,o,a,l,u,c,d,h,p,f,m,g,Z,b,A,v,y,S,E,C,D,N,P,w){l=l||n.Z.DismissType.MANUAL,N=N||n.Z.Orientation.PORTRAIT,super(e,t,null,s,i,r,o,a,l,u,c,d,h,p,f,m,g,Z,b,A,v,y,S,E,C,D=D||n.Z.CropType.CENTER_CROP,N,P,w)}get Le(){return n.Z.TextAlignment.CENTER}}i.es=n.Z.es.Tr},31090:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(1792);class i extends n.Z{constructor(e,t,s,i,r,o,a,l,u,c,d){super(e,null,null,t,s,null,null,null,i=i||n.Z.DismissType.MANUAL,r,null,null,null,null,null,null,null,null,o,a,null,null,null,l,void 0,void 0,void 0,u,c),this.messageFields=d}ll(){return!1}k(e){if(this.Ce===n.Z.es.ul){if(this.nl)return!1;this.nl=!0}return this.lt.St(e),!0}}i.es=n.Z.es.ul},84072:(e,t,s)=>{s.d(t,{Z:()=>r});var n=s(1792),i=s(74663);class r{constructor(e,t,s,o,a,l,u){this.text=e||"",this.backgroundColor=t||n.Z.Xi.Wi,this.textColor=s||n.Z.Xi.Yi,this.borderColor=o||this.backgroundColor,this.clickAction=a||n.Z.ClickAction.NONE,this.uri=l,null==u&&(u=r.$i),this.id=u,this.nl=!1,this.lt=new i.Z}subscribeToClickedEvent(e){return this.lt.ut(e)}removeSubscription(e){this.lt.removeSubscription(e)}removeAllSubscriptions(){this.lt.removeAllSubscriptions()}k(){return!this.nl&&(this.nl=!0,this.lt.St(),!0)}static fromJson(e){return new r(e.text,e.bg_color,e.text_color,e.border_color,e.click_action,e.uri,e.id)}}r.$i=-1},1792:(e,t,s)=>{s.d(t,{Z:()=>l});var n=s(59463),i=s(73695),r=s(11507),o=s(7429),a=s(74663);class l{constructor(e,t,s,n,i,r,o,u,c,d,h,p,f,m,g,Z,b,A,v,y,S,E,C,D,N,P,w,I,T){this.message=e,this.messageAlignment=t||l.TextAlignment.CENTER,this.duration=d||5e3,this.slideFrom=s||l.SlideFrom.BOTTOM,this.extras=n||{},this.triggerId=i,this.clickAction=r||l.ClickAction.NONE,this.uri=o,this.openTarget=u||l.OpenTarget.NONE,this.dismissType=c||l.DismissType.AUTO_DISMISS,this.icon=h,this.imageUrl=p,this.imageStyle=f||l.ImageStyle.TOP,this.iconColor=m||l.Xi.Yi,this.iconBackgroundColor=g||l.Xi.Wi,this.backgroundColor=Z||l.Xi.Yi,this.textColor=b||l.Xi.Zi,this.closeButtonColor=A||l.Xi.th,this.animateIn=v,null==this.animateIn&&(this.animateIn=!0),this.animateOut=y,null==this.animateOut&&(this.animateOut=!0),this.header=S,this.headerAlignment=E||l.TextAlignment.CENTER,this.headerTextColor=C||l.Xi.Zi,this.frameColor=D||l.Xi.sh,this.buttons=N||[],this.cropType=P||l.CropType.FIT_CENTER,this.orientation=w,this.htmlId=I,this.css=T,this.isControl=!1,this.ih=!1,this.nl=!1,this.eh=!1,this.lt=new a.Z,this.hh=new a.Z}subscribeToClickedEvent(e){return this.lt.ut(e)}subscribeToDismissedEvent(e){return this.hh.ut(e)}removeSubscription(e){this.lt.removeSubscription(e),this.hh.removeSubscription(e)}removeAllSubscriptions(){this.lt.removeAllSubscriptions(),this.hh.removeAllSubscriptions()}closeMessage(){this.he(this.qe)}xe(){return!0}ll(){return this.xe()}Ee(){return null!=this.htmlId&&this.htmlId.length>4}ye(){return this.Ee()&&null!=this.css&&this.css.length>0}Ae(){if(this.Ee()&&this.ye())return this.htmlId+"-css"}R(){return!this.ih&&(this.ih=!0,!0)}Cr(){return this.ih}k(){return!this.nl&&(this.nl=!0,this.lt.St(),!0)}J(){return!this.eh&&(this.eh=!0,this.hh.St(),!0)}nh(e){if(e&&e.parentNode){let t=e.closest(".ab-iam-root");if(null==t&&(t=e),this.xe()&&null!=t.parentNode){const e=t.parentNode.classList;e&&e.contains(l.rh)&&e.remove(l.rh),document.body.removeEventListener("touchmove",l.oh)}t.className=t.className.replace(l.lh,l.Eh)}return this.animateOut}he(e,t){if(null==e)return;let s;this.qe=null,s=-1===e.className.indexOf("ab-in-app-message")?e.getElementsByClassName("ab-in-app-message")[0]:e;let n=!1;s&&(n=this.nh(s));const r=document.body;if(null!=r)var o=r.scrollTop;const a=()=>{if(e&&e.parentNode){let t=e.closest(".ab-iam-root");null==t&&(t=e),t.parentNode&&t.parentNode.removeChild(t)}if(null!=this.Ae()){const e=document.getElementById(this.Ae());e&&e.parentNode&&e.parentNode.removeChild(e)}null!=r&&"Safari"===i.Z.browser&&(r.scrollTop=o),t?t():this.J()};n?setTimeout(a,l.uh):a(),this.ke&&this.ke.focus()}Be(){return document.createTextNode(this.message)}Ie(e){let t="";this.message||this.header||!this.xe()||(t="Modal Image"),e.setAttribute("alt",t)}static oh(e){e.targetTouches&&e.targetTouches.length>1||e.target.classList&&e.target.classList.contains("ab-message-text")&&e.target.scrollHeight>e.target.clientHeight||document.querySelector(`.${l.rh}`)&&e.preventDefault()}Th(e){this.xe()&&null!=e.parentNode&&this.orientation!==l.Orientation.LANDSCAPE&&(null!=e.parentNode.classList&&e.parentNode.classList.add(l.rh),document.body.addEventListener("touchmove",l.oh,!!(0,r.QZ)()&&{passive:!1})),e.className+=" "+l.lh}static ah(e){if(e.keyCode===o.m.mh&&!n.ZP.nn(n.JY.Ih)&&document.querySelectorAll(".ab-modal-interactions").length>0){const e=document.getElementsByClassName("ab-html-message");let t=!1;for(let s=0;s<e.length;s++){const n=e[s].contentWindow.document.getElementsByClassName("ab-programmatic-close-button")[0];null!=n&&((0,r.$j)(n),t=!0)}if(!t){const e=document.querySelectorAll(".ab-modal-interactions > .ab-close-button")[0];null!=e&&(0,r.$j)(e)}}}Ah(){this.Nh||n.ZP.nn(n.JY.Ih)||(document.addEventListener("keydown",l.ah,!1),n.ZP._h((()=>{document.removeEventListener("keydown",l.ah)})),this.Nh=!0)}}l.Xi={Zi:4281545523,Yi:4294967295,Wi:4278219733,Lh:4293914607,dh:4283782485,sh:3224580915,th:4288387995},l.Me={Oh:"hd",ze:"ias",Sh:"of",Dh:"do",Li:"umt",Ri:"tf",Mh:"te"},l.SlideFrom={TOP:"TOP",BOTTOM:"BOTTOM"},l.ClickAction={NEWS_FEED:"NEWS_FEED",URI:"URI",NONE:"NONE"},l.DismissType={AUTO_DISMISS:"AUTO_DISMISS",MANUAL:"SWIPE"},l.OpenTarget={NONE:"NONE",BLANK:"BLANK"},l.ImageStyle={TOP:"TOP",GRAPHIC:"GRAPHIC"},l.Orientation={PORTRAIT:"PORTRAIT",LANDSCAPE:"LANDSCAPE"},l.TextAlignment={START:"START",CENTER:"CENTER",END:"END"},l.CropType={CENTER_CROP:"CENTER_CROP",FIT_CENTER:"FIT_CENTER"},l.es={Rh:"SLIDEUP",bh:"MODAL",Ne:"MODAL_STYLED",Tr:"FULL",ul:"WEB_HTML",Pe:"HTML"},l.uh=500,l.Ph=200,l.lh="ab-show",l.Eh="ab-hide",l.rh="ab-pause-scrolling"},3811:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(1792);class i extends n.Z{constructor(e,t,s,i,r,o,a,l,u,c,d,h,p,f,m,g,Z,b,A,v,y,S,E,C,D,N,P){super(e,t,null,s,i,r,o,a,l=l||n.Z.DismissType.MANUAL,u,c,d,h,p,f,m,g,Z,b,A,v,y,S,E,C,D=D||n.Z.CropType.FIT_CENTER,void 0,N,P)}get Le(){return n.Z.TextAlignment.CENTER}}i.es=n.Z.es.bh},26616:(e,t,s)=>{s.d(t,{Z:()=>r});var n=s(1792),i=s(11507);class r extends n.Z{constructor(e,t,s,i,r,o,a,l,u,c,d,h,p,f,m,g,Z,b,A,v,y){g=g||n.Z.Xi.dh,m=m||n.Z.Xi.Lh,super(e,t=t||n.Z.TextAlignment.START,s,i,r,o,a,l,u,c,d,h,null,p,f,m,g,Z,b,A,void 0,void 0,void 0,void 0,void 0,void 0,void 0,v,y)}xe(){return!1}get Le(){return n.Z.TextAlignment.START}Be(){const e=document.createElement("span");return e.appendChild(document.createTextNode(this.message)),e}Th(e){const t=e.getElementsByClassName("ab-in-app-message")[0];i.lP.eo(t,!0,!0)||(this.slideFrom===n.Z.SlideFrom.TOP?t.style.top="0px":t.style.bottom="0px"),super.Th(e)}}r.es=n.Z.es.Rh},85724:(e,t,s)=>{s.d(t,{Z:()=>n});class n{constructor(e,t,s,n,i){this.triggerId=e,this.Qi=t,this.Hi=s,this.Ui=n,this.Vi=i}static fromJson(e,t,s,i,r){return null==e||null==e.trigger_id?null:new n(e.trigger_id,t,s,i,r)}}},80761:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var n=s(59463),i=s(72893),r=s(63552),o=s(52367),a=s(45966),l=s(17615),u=s(75319),c=s(74556);class d{constructor(e,t,s,n,i,r,o,a,l,u){this.Sr=e,this._r=t,this.Ur=s,this.Wr=n+"/safari/"+t,this.Vr=i||"/service-worker.js",this.Or=r,this.gt=o,this.Yr=a||!1,this.Gr=l||!1,this.h=u,this.Hr=c.Z.Jr(),this.Kr=c.Z.Lr()}Qr(){return this.Gr}Xr(e,t,s,n,i){e.unsubscribe().then((e=>{e?this.Zr(t,s,n,i):(o.Z.D.error("Failed to unsubscribe device from push."),"function"==typeof i&&i(!1))})).catch((e=>{o.Z.D.error("Push unsubscription error: "+e),"function"==typeof i&&i(!1)}))}sn(e,t,s){const n=(e=>{if("string"==typeof e)return e;if(0!==e.endpoint.indexOf("https://android.googleapis.com/gcm/send"))return e.endpoint;let t=e.endpoint;return e.rn&&-1===e.endpoint.indexOf(e.rn)&&(t=e.endpoint+"/"+e.rn),t})(e);let i=null,r=null;if(null!=e.getKey)try{i=btoa(String.fromCharCode.apply(null,new Uint8Array(e.getKey("p256dh")))),r=btoa(String.fromCharCode.apply(null,new Uint8Array(e.getKey("auth"))))}catch(e){if("invalid arguments"!==e.message)throw e}const o=(e=>{let t;return e.options&&(t=e.options.applicationServerKey)&&t.byteLength&&t.byteLength>0?btoa(String.fromCharCode.apply(null,new Uint8Array(t))).replace(/\+/g,"-").replace(/\//g,"_"):null})(e);this.Sr.on(n,s,i,r,o),n&&"function"==typeof t&&t(n,i,r)}un(){this.Sr.an(!0)}cn(e,t){this.Sr.an(!1),o.Z.D.info(e),"function"==typeof t&&t(!1)}hn(e,t,s,n){if("default"===t.permission)try{window.safari.pushNotification.requestPermission(this.Wr,e,{api_key:this._r,device_id:this.Ur.te().id},(t=>{"granted"===t.permission&&this.Sr.setPushNotificationSubscriptionType(l.Z.NotificationSubscriptionTypes.OPTED_IN),this.hn(e,t,s,n)}))}catch(e){this.cn("Could not request permission for push: "+e,n)}else"denied"===t.permission?this.cn("The user has blocked notifications from this site, or Safari push is not configured in the Braze dashboard.",n):"granted"===t.permission&&(o.Z.D.info("Device successfully subscribed to push."),this.sn(t.deviceToken,s,new Date))}fn(e,t,s){const n=n=>{switch(n){case"granted":return void("function"==typeof e&&e());case"default":return void("function"==typeof t&&t());case"denied":return void("function"==typeof s&&s());default:o.Z.D.error("Received unexpected permission result "+n)}};let i=!1;const r=window.Notification.requestPermission((e=>{i&&n(e)}));r?r.then((e=>{n(e)})):i=!0}Zr(e,t,s,n){const i={userVisibleOnly:!0};null!=t&&(i.applicationServerKey=t),e.pushManager.subscribe(i).then((e=>{o.Z.D.info("Device successfully subscribed to push."),this.sn(e,s,new Date)})).catch((e=>{c.Z.isPushBlocked()?(o.Z.D.info("Permission for push notifications was denied."),"function"==typeof n&&n(!1)):(o.Z.D.error("Push subscription failed: "+e),"function"==typeof n&&n(!0))}))}ln(){return this.Yr?navigator.serviceWorker.getRegistration():navigator.serviceWorker.register(this.Vr).then((()=>navigator.serviceWorker.ready.then((e=>(e&&"function"==typeof e.update&&e.update().catch((e=>{o.Z.D.info("ServiceWorker update failed: "+e)})),e)))))}dn(e){this.Yr||(e.unregister(),o.Z.D.info("Service worker successfully unregistered."))}subscribe(e,t){if(!c.Z.isPushSupported())return o.Z.D.info(d.pn),void("function"==typeof t&&t(!1));if(this.Hr){if(!this.Yr&&null!=window.location){let e=this.Vr;-1===e.indexOf(window.location.host)&&(e=window.location.host+e),-1===e.indexOf(window.location.protocol)&&(e=window.location.protocol+"//"+e);const s=e.substr(0,e.lastIndexOf("/")+1);if(0!==u.SD.bn().indexOf(s))return o.Z.D.error("Cannot subscribe to push from a path higher than the service worker location (tried to subscribe from "+window.location.pathname+" but service worker is at "+e+")"),void("function"==typeof t&&t(!0))}if(c.Z.isPushBlocked())return void this.cn("Notifications from this site are blocked. This may be a temporary embargo or a permanent denial.",t);if(this.gt&&!this.gt.mn()&&0===this.gt.Zs())return o.Z.D.info("Waiting for VAPID key from server config before subscribing to push."),void this.gt.gn((()=>{this.subscribe(e,t)}));const s=()=>{o.Z.D.info("Permission for push notifications was denied."),"function"==typeof t&&t(!1)},n=()=>{let e="Permission for push notifications was ignored.";c.Z.isPushBlocked()&&(e+=" The browser has automatically blocked further permission requests for a period (probably 1 week)."),o.Z.D.info(e),"function"==typeof t&&t(!0)},d=c.Z.isPushPermissionGranted(),h=()=>{d||this.Sr.setPushNotificationSubscriptionType(l.Z.NotificationSubscriptionTypes.OPTED_IN),this.ln().then((s=>{if(null==s)return o.Z.D.error("No service worker registration. Set the `manageServiceWorkerExternally` initialization option to false or ensure that your service worker is registered before calling registerPush."),void("function"==typeof t&&t(!0));s.pushManager.getSubscription().then((n=>{let l=null;if(this.gt&&null!=this.gt.mn()&&(l=o.Z.yn.wn(this.gt.mn())),n){let u=null,c=null;const d=this.h.I(a.I.q.vn);if(d&&!(0,i.kJ)(d)){let e;try{e=r.Z.Pn(d).kn}catch(t){e=null}null==e||isNaN(e.getTime())||0===e.getTime()||(u=e,c=new Date(u),c.setMonth(u.getMonth()+6))}null!=l&&n.options&&n.options.applicationServerKey&&n.options.applicationServerKey.byteLength&&n.options.applicationServerKey.byteLength>0&&!(0,i.Xy)(l,new Uint8Array(n.options.applicationServerKey))?(n.options.applicationServerKey.byteLength>12?o.Z.D.info("Device was already subscribed to push using a different VAPID provider, creating new subscription."):o.Z.D.info("Attempting to upgrade a gcm_sender_id-based push registration to VAPID - depending on the browser this may or may not result in the same gcm_sender_id-based subscription."),this.Xr(n,s,l,e,t)):n.expirationTime&&new Date(n.expirationTime)<=(new Date).valueOf()?(o.Z.D.info("Push subscription is expired, creating new subscription."),this.Xr(n,s,l,e,t)):d&&(0,i.kJ)(d)?this.Xr(n,s,l,e,t):null==c?(o.Z.D.info("No push subscription creation date found, creating new subscription."),this.Xr(n,s,l,e,t)):c<=(new Date).valueOf()?(o.Z.D.info("Push subscription older than 6 months, creating new subscription."),this.Xr(n,s,l,e,t)):(o.Z.D.info("Device already subscribed to push, sending existing subscription to backend."),this.sn(n,e,u))}else this.Zr(s,l,e,t)})).catch((e=>{o.Z.D.error("Error checking current push subscriptions: "+e)}))})).catch((e=>{o.Z.D.error("ServiceWorker registration failed: "+e)}))};this.fn(h,n,s)}else if(this.Kr){if(null==this.Or||""===this.Or)return o.Z.D.error("You must supply the safariWebsitePushId initialization option in order to use registerPush on Safari"),void("function"==typeof t&&t(!0));const s=window.safari.pushNotification.permission(this.Or);this.hn(this.Or,s,e,t)}}unsubscribe(e,t){if(!c.Z.isPushSupported())return o.Z.D.info(d.pn),void("function"==typeof t&&t());this.Hr?navigator.serviceWorker.getRegistration().then((s=>{s?s.pushManager.getSubscription().then((n=>{n&&(this.un(),n.unsubscribe().then((n=>{n?(o.Z.D.info("Device successfully unsubscribed from push."),"function"==typeof e&&e()):(o.Z.D.error("Failed to unsubscribe device from push."),"function"==typeof t&&t()),this.dn(s)})).catch((e=>{o.Z.D.error("Push unsubscription error: "+e),"function"==typeof t&&t()})))})).catch((e=>{o.Z.D.error("Error unsubscribing from push: "+e),"function"==typeof t&&t()})):(o.Z.D.info("Device already unsubscribed from push."),"function"==typeof e&&e())})):this.Kr&&(this.un(),o.Z.D.info("Device unsubscribed from push."),"function"==typeof e&&e())}}d.pn="Push notifications are not supported in this browser.";const h={t:!1,pushManager:null,aa:()=>(h.o(),h.pushManager||(h.pushManager=new d(n.ZP.gr(),n.ZP.ea(),n.ZP.ce(),n.ZP.Ks(),n.ZP.nn(n.JY.na),n.ZP.nn(n.JY.ra),n.ZP.ir(),n.ZP.nn(n.JY.ta),n.ZP.nn(n.JY.ia),n.ZP.l())),h.pushManager),o:()=>{h.t||(n.ZP.u(h),h.t=!0)},destroy:()=>{h.pushManager=null,h.t=!1}},p=h},12261:(e,t,s)=>{s.r(t),s.d(t,{requestPushPermission:()=>r});var n=s(59463),i=s(80761);function r(e,t){if(n.ZP.rr())return i.default.aa().subscribe(((t,s,i)=>{n.ZP.mr().requestImmediateDataFlush(),"function"==typeof e&&e(t,s,i)}),t)}},77824:(e,t,s)=>{s.r(t),s.d(t,{unregisterPush:()=>r});var n=s(59463),i=s(80761);function r(e,t){if(n.ZP.rr())return i.default.aa().unsubscribe(e,t)}},74556:(e,t,s)=>{s.d(t,{Z:()=>i});const n={Jr:()=>"serviceWorker"in navigator&&"undefined"!=typeof ServiceWorkerRegistration&&"showNotification"in ServiceWorkerRegistration.prototype&&"PushManager"in window,Lr:()=>"safari"in window&&"pushNotification"in window.safari&&"function"==typeof window.safari.pushNotification.permission&&"function"==typeof window.safari.pushNotification.requestPermission,isPushSupported:()=>n.Jr()||n.Lr(),isPushBlocked:()=>{const e=n.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"denied"===window.Notification.permission,t=n.isPushSupported()&&(!("Notification"in window)||null==window.Notification);return e||t},isPushPermissionGranted:()=>n.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"granted"===window.Notification.permission,Gi:()=>!n.isPushBlocked()&&n.isPushSupported()&&!n.isPushPermissionGranted()},i=n},56924:(e,t,s)=>{s.d(t,{Z:()=>u});var n=s(42308),i=s(8548),r=s(63552),o=s(52367),a=s(45966),l=s(17615);class u{constructor(e,t){this.gt=e,this.h=t}getUserId(){const e=this.h.tu(a.I.eu.su);if(null==e)return null;let t=e.iu,s=(0,i.E)(t);if(s>l.Z.ee){for(;s>l.Z.ee;)t=t.slice(0,t.length-1),s=(0,i.E)(t);e.iu=t,this.h.uu(a.I.eu.su,e)}return t}ru(e){const t=null==this.getUserId();this.h.uu(a.I.eu.su,new n.Z(e)),t&&this.h.ou(e)}setCustomUserAttribute(e,t){if(this.gt.hu(e))return o.Z.D.info('Custom Attribute "'+e+'" is blocklisted, ignoring.'),!1;const s={};return s[e]=t,this.nu(l.Z.lu,s,!0)}nu(e,t,s,n){const i=this.h.mu(this.getUserId(),e,t);let r="",a=e,l=t;return s&&(r=" custom","object"==typeof t&&(a=Object.keys(t)[0],l=t[a],"object"==typeof l&&(l=JSON.stringify(l,null,2)))),!n&&i&&o.Z.D.info(`Logged${r} attribute ${a} with value ${l}`),i}on(e,t,s,n,i){this.nu("push_token",e,!1,!0),this.nu("custom_push_public_key",s,!1,!0),this.nu("custom_push_user_auth",n,!1,!0),this.nu("custom_push_vapid_public_key",i,!1,!0);const l=o.Z.xt.Ft,u=new o.Z.qt(l,o.Z.D),c=new r.Z(e,t,s,n,i);this.h.B(a.I.q.vn,c.ss()),u.setItem(l.$t.cu,l.se,!0)}an(e){if(this.nu("push_token",null,!1,!0),this.nu("custom_push_public_key",null,!1,!0),this.nu("custom_push_user_auth",null,!1,!0),this.nu("custom_push_vapid_public_key",null,!1,!0),e){const e=o.Z.xt.Ft,t=new o.Z.qt(e,o.Z.D);this.h.B(a.I.q.vn,!1),t.setItem(e.$t.cu,e.se,!1)}}}},17615:(e,t,s)=>{s.d(t,{Z:()=>l});var n=s(72893),i=s(52367),r=s(3905),o=s(27671),a=s(57750);class l{constructor(e,t){this.v=e,this.Ci=t}getUserId(e){null==e&&i.Z.D.error("getUserId must be supplied with a callback. e.g., braze.getUser().getUserId(function(userId) {console.log('the user id is ' + userId)})"),"function"==typeof e&&e(this.v.getUserId())}addAlias(e,t){return!(0,r.ro)(e,"add alias","the alias",!1)||e.length<=0?(i.Z.D.error("addAlias requires a non-empty alias"),!1):!(0,r.ro)(t,"add alias","the label",!1)||t.length<=0?(i.Z.D.error("addAlias requires a non-empty label"),!1):this.Ci.Nn(e,t).S}setFirstName(e){return!!(0,r.ro)(e,"set first name","the firstName",!0)&&this.v.nu("first_name",e)}setLastName(e){return!!(0,r.ro)(e,"set last name","the lastName",!0)&&this.v.nu("last_name",e)}setEmail(e){return null===e||(0,r.vV)(e)?this.v.nu("email",e):(i.Z.D.error(`Cannot set email address - "${e}" did not pass RFC-5322 validation.`),!1)}setGender(e){return"string"==typeof e&&(e=e.toLowerCase()),!(null!==e&&!(0,n.fk)(l.Genders,e,`Gender "${e}" is not a valid gender.`,"User.Genders"))&&this.v.nu("gender",e)}setDateOfBirth(e,t,s){return null===e&&null===t&&null===s?this.v.nu("dob",null):(e=parseInt(e),t=parseInt(t),s=parseInt(s),isNaN(e)||isNaN(t)||isNaN(s)||t>12||t<1||s>31||s<1?(i.Z.D.error("Cannot set date of birth - parameters should comprise a valid date e.g. setDateOfBirth(1776, 7, 4);"),!1):this.v.nu("dob",`${e}-${t}-${s}`))}setCountry(e){return!!(0,r.ro)(e,"set country","the country",!0)&&this.v.nu("country",e)}setHomeCity(e){return!!(0,r.ro)(e,"set home city","the homeCity",!0)&&this.v.nu("home_city",e)}setLanguage(e){return!!(0,r.ro)(e,"set language","the language",!0)&&this.v.nu("language",e)}setEmailNotificationSubscriptionType(e){return!!(0,n.fk)(l.NotificationSubscriptionTypes,e,`Email notification setting "${e}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.v.nu("email_subscribe",e)}setPushNotificationSubscriptionType(e){return!!(0,n.fk)(l.NotificationSubscriptionTypes,e,`Push notification setting "${e}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.v.nu("push_subscribe",e)}setPhoneNumber(e){return!!(0,r.ro)(e,"set phone number","the phoneNumber",!0)&&(null===e||e.match(l.Cn)?this.v.nu("phone",e):(i.Z.D.error(`Cannot set phone number - "${e}" did not pass validation.`),!1))}setLastKnownLocation(e,t,s,n,r){return null==e||null==t?(i.Z.D.error("Cannot set last-known location - latitude and longitude are required."),!1):(e=parseFloat(e),t=parseFloat(t),null!=s&&(s=parseFloat(s)),null!=n&&(n=parseFloat(n)),null!=r&&(r=parseFloat(r)),isNaN(e)||isNaN(t)||null!=s&&isNaN(s)||null!=n&&isNaN(n)||null!=r&&isNaN(r)?(i.Z.D.error("Cannot set last-known location - all supplied parameters must be numeric."),!1):e>90||e<-90||t>180||t<-180?(i.Z.D.error("Cannot set last-known location - latitude and longitude are bounded by 90 and 180 respectively."),!1):null!=s&&s<0||null!=r&&r<0?(i.Z.D.error("Cannot set last-known location - accuracy and altitudeAccuracy may not be negative."),!1):this.Ci.setLastKnownLocation(this.v.getUserId(),e,t,n,s,r).S)}setCustomUserAttribute(e,t,s){if(!(0,r.bj)(e))return!1;const l=t=>{const[s]=(0,r.lg)(t,o.db,"attribute value",`set custom user attribute "${e}"`,"custom user attribute");return s};if((0,n.kJ)(t)){const[s,n]=(0,r.$g)(e,t);if(!s&&!n&&0!==t.length)return!1;if(s||0===t.length)return this.Ci.In(i.Z.A.Sn,e,t).S;for(const e of t)if(!l(e))return!1}else if((0,n.Kn)(t)){if(!l(t))return!1;if(s)return this.Ci.In(i.Z.A.An,e,t).S}else{if(void 0===t||!(0,r.UO)(t))return!1;if((0,n.J_)(t)&&(t=(0,a.BT)(t)),"string"==typeof t&&!(0,r.zM)(t,`set custom user attribute "${e}"`,"the element in the given array"))return!1}return this.v.setCustomUserAttribute(e,t)}addToCustomAttributeArray(e,t){return!!(0,r.zM)(e,"add to custom user attribute array","the given key")&&!(null!=t&&!(0,r.zM)(t,"add to custom user attribute array","the given value"))&&this.Ci.In(i.Z.A.Un,e,t).S}removeFromCustomAttributeArray(e,t){return!!(0,r.zM)(e,"remove from custom user attribute array","the given key")&&!(null!=t&&!(0,r.zM)(t,"remove from custom user attribute array","the given value"))&&this.Ci.In(i.Z.A.En,e,t).S}incrementCustomUserAttribute(e,t){if(!(0,r.zM)(e,"increment custom user attribute","the given key"))return!1;null==t&&(t=1);const s=parseInt(t);return isNaN(s)||s!==parseFloat(t)?(i.Z.D.error(`Cannot increment custom user attribute because the given incrementValue "${t}" is not an integer.`),!1):this.Ci.In(i.Z.A.Fn,e,s).S}setCustomLocationAttribute(e,t,s){return!!(0,r.zM)(e,"set custom location attribute","the given key")&&((null!==t||null!==s)&&(t=parseFloat(t),s=parseFloat(s),isNaN(t)||t>90||t<-90||isNaN(s)||s>180||s<-180)?(i.Z.D.error("Received invalid values for latitude and/or longitude. Latitude and longitude are bounded by 90 and 180 respectively, or must both be null for removal."),!1):this.Ci.Tn(e,t,s).S)}addToSubscriptionGroup(e){return!(0,r.ro)(e,"add user to subscription group","subscription group ID",!1)||e.length<=0?(i.Z.D.error("addToSubscriptionGroup requires a non-empty subscription group ID"),!1):this.Ci.$n(e,l._n.SUBSCRIBED).S}removeFromSubscriptionGroup(e){return!(0,r.ro)(e,"remove user from subscription group","subscription group ID",!1)||e.length<=0?(i.Z.D.error("removeFromSubscriptionGroup requires a non-empty subscription group ID"),!1):this.Ci.$n(e,l._n.UNSUBSCRIBED).S}on(e,t,s,n,i){this.v.on(e,t,s,n,i),this.Ci.Bn()}an(e){this.v.an(e)}}l.Cn=/^[0-9 .\\(\\)\\+\\-]+$/,l.Genders={MALE:"m",FEMALE:"f",OTHER:"o",UNKNOWN:"u",NOT_APPLICABLE:"n",PREFER_NOT_TO_SAY:"p"},l.NotificationSubscriptionTypes={OPTED_IN:"opted_in",SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},l._n={SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},l.Dn="user_id",l.lu="custom",l.ee=997},67:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(85563);class i{constructor(e,t){this.cards=e,this.lastUpdated=t}getUnreadCardCount(){let e=0;for(const t of this.cards)t.viewed||t instanceof n.Z||e++;return e}dr(){throw new Error("Must be implemented in a subclass")}logCardImpressions(){throw new Error("Must be implemented in subclass")}logCardClick(){throw new Error("Must be implemented in subclass")}sr(){throw new Error("Must be implemented in subclass")}}i.ur=6e4,i.uh=500,i.uo=1e4},40158:(e,t,s)=>{s.d(t,{Z:()=>n});class n{constructor(){}Rs(e){}changeUser(e){}clearData(){}}},27671:(e,t,s)=>{s.d(t,{Fz:()=>n,De:()=>i,U4:()=>r,rF:()=>o,_P:()=>a,db:()=>l});const n=100,i="inAppMessage must be an InAppMessage object",r="must be a Card object",o=500,a="logCustomEvent",l="setCustomUserAttribute"},39179:(e,t,s)=>{s.d(t,{Z:()=>a});var n=s(52367),i=s(59463),r=s(57559),o=s(24673);const a={G:(e,t,s)=>{const a=new o.Z,l=i.ZP.g();if(!l)return n.Z.D.info(`Not logging event with type "${e}" because the current session ID could not be found.`),a;const u=l.mo();return a.ve.push(new r.Z(s||i.ZP.p().getUserId(),e,(new Date).valueOf(),u,t)),a.S=i.ZP.l().bo(a.ve),a}}},64095:(e,t,s)=>{s.d(t,{cP:()=>m,tQ:()=>g,cz:()=>b,cV:()=>A,Yz:()=>v,Of:()=>y,GB:()=>S});var n=s(67),i=s(35608),r=s(11507),o=s(85563),a=s(72857),l=s(72893),u=s(7429),c=s(9313),d=s(18503),h=s(52367),p=s(3905),f=s(73046);const m="data-last-requested-refresh";function g(e){e&&(e.className=e.className.replace("ab-show","ab-hide"),setTimeout((()=>{e&&e.parentNode&&e.parentNode.removeChild(e)}),n.Z.uh));const t=e.getAttribute("data-update-subscription-id");null!=t&&(0,d.A)(t)}function Z(e,t){const s=document.createElement("div");if(s.className="ab-feed-body",s.setAttribute("aria-label","Feed"),s.setAttribute("role","feed"),null==e.lastUpdated){const e=document.createElement("div");e.className="ab-no-cards-message";const t=document.createElement("i");t.className="fa fa-spinner fa-spin fa-4x ab-initial-spinner",e.appendChild(t),s.appendChild(e)}else{let n=!1;const r=t=>{e.logCardClick(t)};for(const a of e.cards){const l=a instanceof o.Z;!l||e.dr()?(s.appendChild((0,i.Dj)(a,r,t)),n=n||!l):h.Z.D.error("Received a control card for a legacy news feed. Control cards are only supported with content cards.")}if(!n){const e=document.createElement("div");e.className="ab-no-cards-message",e.innerHTML=c.Z.m().get("NO_CARDS_MESSAGE"),e.setAttribute("role","article"),s.appendChild(e)}}return s}function b(e,t){if(null!=t){const s=[],n=t.querySelectorAll(".ab-card");e.do||(e.do={});for(let t=0;t<n.length;t++){const o=(0,i.sv)(n[t]);if(e.do[o])continue;let a=(0,i.ql)(n[t]),l=(0,i.rW)(n[t]);const u=a,c=l,d=(0,r.rJ)(n[t]),h=(0,r.Fr)(n[t]);if(!a&&d&&(a=!0,(0,i.Ji)(n[t])),!l&&h&&(l=!0,(0,i.Zw)(n[t])),a&&l){if(d||h||(0,i.pq)(n[t]),u&&c)continue;for(const t of e.cards)if(t.id===o){e.do[t.id]=!0,s.push(t);break}}}s.length>0&&e.logCardImpressions(s)}}function A(e,t){t.setAttribute("aria-busy","true");const s=t.querySelectorAll(".ab-refresh-button")[0];null!=s&&(s.className+=" fa-spin");const i=(new Date).valueOf().toString();t.setAttribute("data-last-requested-refresh",i),setTimeout((()=>{if(t.getAttribute("data-last-requested-refresh")===i){const e=t.querySelectorAll(".fa-spin");for(let t=0;t<e.length;t++)e[t].className=e[t].className.replace(/fa-spin/g,"");const s=t.querySelectorAll(".ab-initial-spinner")[0];if(null!=s){const e=document.createElement("span");e.innerHTML=c.Z.m().get("FEED_TIMEOUT_MESSAGE"),s.parentNode.appendChild(e),s.parentNode.removeChild(s)}"true"===t.getAttribute("aria-busy")&&t.setAttribute("aria-busy","false")}}),n.Z.uo),e.sr()}function v(e,t){const s=document.createElement("div");s.className="ab-feed ab-hide ab-effect-slide",s.setAttribute("role","dialog"),s.setAttribute("aria-label","Feed"),s.setAttribute("tabindex","-1");const n=document.createElement("div");n.className="ab-feed-buttons-wrapper",n.setAttribute("role","group"),s.appendChild(n);const i=document.createElement("i");i.className="fa fa-times ab-close-button",i.setAttribute("aria-label","Close Feed"),i.setAttribute("tabindex","0"),i.setAttribute("role","button");const r=e=>{g(s),e.stopPropagation()};i.addEventListener("keydown",(e=>{e.keyCode!==u.m.fo&&e.keyCode!==u.m.co||r(e)})),i.onclick=r;const o=document.createElement("i");o.className="fa fa-refresh ab-refresh-button",null==e.lastUpdated&&(o.className+=" fa-spin"),o.setAttribute("aria-label","Refresh Feed"),o.setAttribute("tabindex","0"),o.setAttribute("role","button");const a=t=>{A(e,s),t.stopPropagation()};return o.addEventListener("keydown",(e=>{e.keyCode!==u.m.fo&&e.keyCode!==u.m.co||a(e)})),o.onclick=a,n.appendChild(o),n.appendChild(i),s.appendChild(Z(e,t)),s.onscroll=()=>{b(e,s)},s}function y(e,t,s,n,i){if(!(0,l.kJ)(t))return;const r=[];for(const e of t)if(e instanceof a.Z){if(e.url&&p.y9.test(e.url)){let t=(0,f.OL)(e.url);if((0,f.je)(t)){h.Z.D.error((0,f.Tu)(f.yi.Ei,"Content Card"));continue}}r.push(e)}if(e.cards=r,e.lastUpdated=s,null!=n)if(n.setAttribute("aria-busy","false"),null==e.lastUpdated)g(n);else{const t=n.querySelectorAll(".ab-feed-body")[0];if(null!=t){const s=Z(e,i);t.parentNode.replaceChild(s,t),b(e,s.parentNode)}}}function S(e,t){t.setAttribute("data-update-subscription-id",e)}},58426:(e,t,s)=>{s.d(t,{Z:()=>n});const n={en:{NO_CARDS_MESSAGE:"We have no updates for you at this time.<br/>Please check again later.",FEED_TIMEOUT_MESSAGE:"Sorry, this refresh timed out.<br/>Please try again later."},ar:{NO_CARDS_MESSAGE:"   .     ",FEED_TIMEOUT_MESSAGE:"   "},cs:{NO_CARDS_MESSAGE:"V tuto chvli pro vs nemme dn aktualizace.<br/>Zkontrolujte prosm znovu pozdji.",FEED_TIMEOUT_MESSAGE:"Prosm zkuste to znovu pozdji."},da:{NO_CARDS_MESSAGE:"Vi har ingen updates.<br/>Prv venligst senere.",FEED_TIMEOUT_MESSAGE:"Prv venligst senere."},de:{NO_CARDS_MESSAGE:"Derzeit sind keine Updates verfgbar.<br/>Bitte spter noch einmal versuchen.",FEED_TIMEOUT_MESSAGE:"Bitte spter noch einmal versuchen."},es:{NO_CARDS_MESSAGE:"No tenemos actualizaciones.<br/>Por favor comprubelo ms tarde.",FEED_TIMEOUT_MESSAGE:"Por favor intntelo ms tarde."},"es-mx":{NO_CARDS_MESSAGE:"No tenemos ninguna actualizacin.<br/>Vuelva a verificar ms tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, vuelva a intentarlo ms tarde."},et:{NO_CARDS_MESSAGE:"Uuendusi pole praegu saadaval.<br/>Proovige hiljem uuesti.",FEED_TIMEOUT_MESSAGE:"Palun proovige hiljem uuesti."},fi:{NO_CARDS_MESSAGE:"Pivityksi ei ole saatavilla.<br/>Tarkista myhemmin uudelleen.",FEED_TIMEOUT_MESSAGE:"Yrit myhemmin uudelleen."},fr:{NO_CARDS_MESSAGE:"Aucune mise  jour disponible.<br/>Veuillez vrifier ultrieurement.",FEED_TIMEOUT_MESSAGE:"Veuillez ressayer ultrieurement."},he:{NO_CARDS_MESSAGE:".  .    ",FEED_TIMEOUT_MESSAGE:".   "},hi:{NO_CARDS_MESSAGE:"            .",FEED_TIMEOUT_MESSAGE:"     ."},id:{NO_CARDS_MESSAGE:"Kami tidak memiliki pembaruan. Coba lagi nanti.",FEED_TIMEOUT_MESSAGE:"Coba lagi nanti."},it:{NO_CARDS_MESSAGE:"Non ci sono aggiornamenti.<br/>Ricontrollare pi tardi.",FEED_TIMEOUT_MESSAGE:"Riprovare pi tardi."},ja:{NO_CARDS_MESSAGE:"<br/>",FEED_TIMEOUT_MESSAGE:""},ko:{NO_CARDS_MESSAGE:" .    .",FEED_TIMEOUT_MESSAGE:"   ."},ms:{NO_CARDS_MESSAGE:"Tiada kemas kini. Sila periksa kemudian.",FEED_TIMEOUT_MESSAGE:"Sila cuba kemudian."},nl:{NO_CARDS_MESSAGE:"Er zijn geen updates.<br/>Probeer het later opnieuw.",FEED_TIMEOUT_MESSAGE:"Probeer het later opnieuw."},no:{NO_CARDS_MESSAGE:"Vi har ingen oppdateringer.<br/>Vennligst sjekk igjen senere.",FEED_TIMEOUT_MESSAGE:"Vennligst prv igjen senere."},pl:{NO_CARDS_MESSAGE:"Brak aktualizacji.<br/>Prosz sprawdzi ponownie pniej.",FEED_TIMEOUT_MESSAGE:"Prosz sprbowa ponownie pniej."},pt:{NO_CARDS_MESSAGE:"No temos atualizaes.<br/>Por favor, verifique mais tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, tente mais tarde."},"pt-br":{NO_CARDS_MESSAGE:"No temos nenhuma atualizao.<br/>Verifique novamente mais tarde.",FEED_TIMEOUT_MESSAGE:"Tente novamente mais tarde."},ru:{NO_CARDS_MESSAGE:" .<br/>,   .",FEED_TIMEOUT_MESSAGE:",   ."},sv:{NO_CARDS_MESSAGE:"Det finns inga uppdateringar.<br/>Frsk igen senare.",FEED_TIMEOUT_MESSAGE:"Frsk igen senare."},th:{NO_CARDS_MESSAGE:" .",FEED_TIMEOUT_MESSAGE:"."},uk:{NO_CARDS_MESSAGE:" .<br/>,   .",FEED_TIMEOUT_MESSAGE:" ,    ."},vi:{NO_CARDS_MESSAGE:"Chng ti khng c cp nht no.<br/>Vui lng kim tra li sau.",FEED_TIMEOUT_MESSAGE:"Vui lng th li sau."},"zh-hk":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},"zh-hans":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},"zh-hant":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},"zh-tw":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},zh:{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."}}},61041:(e,t,s)=>{s.r(t),s.d(t,{Banner:()=>i.Z,BrazeSdkMetadata:()=>B,CaptionedImage:()=>r.Z,Card:()=>n.Z,ClassicCard:()=>o.Z,ContentCards:()=>w,ControlCard:()=>a.Z,ControlMessage:()=>Ee.Z,DeviceProperties:()=>$.Z,FeatureFlag:()=>tt.Z,Feed:()=>he.Z,FullScreenMessage:()=>Ce.Z,HtmlMessage:()=>De.Z,InAppMessage:()=>ye.Z,InAppMessageButton:()=>Se.Z,ModalMessage:()=>Ne.Z,SlideUpMessage:()=>Pe.Z,User:()=>et.Z,WindowUtils:()=>Be.SD,addSdkMetadata:()=>G,automaticallyShowInAppMessages:()=>We,changeUser:()=>q.changeUser,destroy:()=>z,destroyFeed:()=>me,disableSDK:()=>j,enableSDK:()=>K,getAllFeatureFlags:()=>ot,getCachedContentCards:()=>I,getCachedFeed:()=>fe,getDeviceId:()=>W,getFeatureFlag:()=>it,getUser:()=>Y.P,handleBrazeAction:()=>de.h,hideContentCards:()=>_,initialize:()=>J,isDisabled:()=>X,isPushBlocked:()=>Je,isPushPermissionGranted:()=>Xe,isPushSupported:()=>He,logCardClick:()=>l.d,logCardDismissal:()=>u.K,logCardImpressions:()=>c.p,logContentCardClick:()=>h,logContentCardImpressions:()=>d,logContentCardsDisplayed:()=>k,logCustomEvent:()=>H.logCustomEvent,logFeedDisplayed:()=>ge.j,logInAppMessageButtonClick:()=>Le,logInAppMessageClick:()=>Ue,logInAppMessageHtmlClick:()=>Fe,logInAppMessageImpression:()=>Oe,logPurchase:()=>V.logPurchase,openSession:()=>te,refreshFeatureFlags:()=>st.refreshFeatureFlags,removeAllSubscriptions:()=>se,removeSubscription:()=>ne.A,requestContentCardsRefresh:()=>P,requestFeedRefresh:()=>Ze.a,requestImmediateDataFlush:()=>ie.requestImmediateDataFlush,requestPushPermission:()=>Ve.requestPushPermission,setLogger:()=>re,setSdkAuthenticationSignature:()=>ae,showContentCards:()=>F,showFeed:()=>be.showFeed,showInAppMessage:()=>je,subscribeToContentCardsUpdates:()=>O,subscribeToFeatureFlagsUpdates:()=>rt,subscribeToFeedUpdates:()=>Ae.n,subscribeToInAppMessage:()=>Ke,subscribeToSdkAuthenticationFailures:()=>le,toggleContentCards:()=>x,toggleFeed:()=>ve,toggleLogging:()=>ue,unregisterPush:()=>Qe.unregisterPush,wipeData:()=>ce});var n=s(72857),i=s(17283),r=s(5383),o=s(37653),a=s(85563),l=s(1280),u=s(22080),c=s(11066);function d(e){return(0,c.p)(e,!0)}function h(e){return(0,l.d)(e,!0)}var p=s(67),f=s(59463),m=s(41843),g=s(40158),Z=s(57750),b=s(1148),A=s(23756),v=s(52367),y=s(45966),S=s(74663),E=s(39179);class C extends g.Z{constructor(e,t,s,n,i){super(),this.v=e,this.h=t,this.gt=s,this.wt=n,this.vt=i,this.yt=new S.Z,f.ZP.jt(this.yt),this.Ut=0,this.kt=0,this.zt();const r=v.Z.xt.Ft;new v.Z.qt(r,v.Z.D).Jt(r.$t.Mt,(e=>{this.Bt(e)})),this.Gt=null}Ht(){return this.Kt}Qt(e){this.Kt=e}Vt(){return this.Wt}Xt(e){this.Wt=e}zt(){const e=this.h.I(y.I.q.Yt)||[],t=[];for(let s=0;s<e.length;s++){const n=(0,A.rN)(e[s]);null!=n&&t.push(n)}this.Zt=this.Cs(this.ws(t,!1)),this.Ut=this.h.I(y.I.q.vs)||this.Ut,this.kt=this.h.I(y.I.q.ys)||this.kt}Ns(e,t,s,n){let i;if(t){i=[];for(const e of this.Zt)e.test&&i.push(e)}else i=this.Zt.slice();for(let s=0;s<e.length;s++){const n=e[s];let r=null;for(let e=0;e<this.Zt.length;e++)if(n.id===this.Zt[e].id){r=this.Zt[e];break}if(t){const e=(0,A.xA)(n);null!=r&&r.viewed&&(e.viewed=!0),null!=e&&i.push(e)}else if(null==r){const e=(0,A.xA)(n);null!=e&&i.push(e)}else if(!r.ct(n))for(let e=0;e<i.length;e++)if(n.id===i[e].id){i.splice(e,1);break}}this.Zt=this.Cs(this.ws(i,t)),this.Ss(),this.Ut=s||0,this.h.B(y.I.q.vs,this.Ut),this.kt=n||0,this.h.B(y.I.q.ys,this.kt)}Rs(e){if(this.Ts()&&null!=e&&e.cards){this.h.B(y.I.q._s,f.ZP.Ds());const t=e.full_sync;t||this.zt(),this.Ns(e.cards,t,e.last_full_sync_at,e.last_card_updated_at),this.yt.St(this.Us(!0))}}Fs(e){this.h.B(y.I.q.As,e)}Ls(e,t,s){const n=()=>{this.Is(t,s,!0)},i=(0,m.D)(e);let r,o;if(this.Js(),!i["retry-after"])return void this.Fs(0);if(r=i["retry-after"],isNaN(r)&&!isNaN(Date.parse(r)))o=Date.parse(r)-(new Date).getTime(),o<0&&n();else{if(isNaN(parseFloat(r))){const e="Received unexpected value for retry-after header in /sync response";return E.Z.G(v.Z.A.qs,{e:e+": "+r}),void this.Fs(0)}o=1e3*r}this.Gt=setTimeout((()=>{n()}),o);let a=this.h.I(y.I.q.As);a&&!isNaN(parseInt(a))||(a=0),this.Fs(parseInt(a)+1)}Bt(e){if(!this.Ts())return;this.zt();const t=this.Zt.slice(),s=this.v.getUserId();for(let n=0;n<e.length;n++)if(s===e[n].userId||null==s&&null==e[n].userId){const s=e[n].card;let i=null;for(let e=0;e<this.Zt.length;e++)if(s.id===this.Zt[e].id){i=this.Zt[e];break}if(null==i){const e=(0,A.xA)(s);null!=e&&t.push(e)}else if(!i.ct(s))for(let e=0;e<t.length;e++)if(s.id===t[e].id){t.splice(e,1);break}}this.Zt=this.Cs(this.ws(t,!1)),this.Ss(),this.yt.St(this.Us(!0))}ws(e,t){const s=this.h.I(y.I.q.$)||{},n=this.h.I(y.I.q.O)||{},i=this.h.I(y.I.q.K)||{},r={},o={},a={};for(let t=0;t<e.length;t++)s[e[t].id]&&(e[t].clicked=!0,r[e[t].id]=!0),n[e[t].id]&&(e[t].viewed=!0,o[e[t].id]=!0),i[e[t].id]&&(e[t].dismissed=!0,a[e[t].id]=!0);return t&&(this.h.B(y.I.q.$,r),this.h.B(y.I.q.O,o),this.h.B(y.I.q.K,a)),e}Cs(e){const t=[],s=new Date,n=this.h.I(y.I.q.K)||{};let i=!1;for(let r=0;r<e.length;r++){const o=e[r].url;!this.wt&&o&&(0,b.o)(o)?v.Z.D.error(`Card with url ${o} will not be displayed because Javascript URLs are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable this card.`):(null==e[r].expiresAt||e[r].expiresAt>=s)&&!e[r].dismissed?t.push(e[r]):(n[e[r].id]=!0,i=!0)}return i&&this.h.B(y.I.q.K,n),t}Ss(){const e=[];for(let t=0;t<this.Zt.length;t++)e.push(this.Zt[t].ss());this.h.B(y.I.q.Yt,e)}Js(){this.Gt&&(clearTimeout(this.Gt),this.Gt=null)}Is(e,t,s){if(s||(this.Js(),this.Fs(0)),!this.Ts())return void(this.Es||(this.Es=this.gt.Ms((()=>{this.Is(e,t)}))));const n=this.vt.Ps({},!0);this.h.I(y.I.q._s)!==f.ZP.Ds()&&this.$s(),n.last_full_sync_at=this.Ut,n.last_card_updated_at=this.kt;const i=this.vt.Bs(n,!0,!1,s);this.vt.Gs(n,(()=>{m.Z.Hs({url:this.vt.Ks()+"/content_cards/sync",data:n,headers:i,S:(s,r)=>{this.vt.Os(n,s,i)?(this.vt.Qs(),this.Ls(r,e,t),this.Rs(s),"function"==typeof e&&e()):"function"==typeof t&&t()},error:e=>{this.vt.Vs(e,"retrieving content cards"),"function"==typeof t&&t()}})}))}Us(e){e||this.zt();const t=this.Cs(this.Zt);t.sort(((e,t)=>e.pinned&&!t.pinned?-1:t.pinned&&!e.pinned?1:e.updated>t.updated?-1:t.updated>e.updated?1:0));let s=Math.max(this.kt||0,this.Ut||0);return 0===s&&(s=void 0),this.h.I(y.I.q.ys)===this.kt&&void 0===s&&(s=this.kt),new w(t,(0,Z.X2)(s))}Ws(e){return this.yt.ut(e)}$s(){this.Ut=0,this.kt=0,this.h.Xs(y.I.q.vs),this.h.Xs(y.I.q.ys)}changeUser(e){e||(this.Zt=[],this.yt.St(new w(this.Zt.slice(),null)),this.h.Xs(y.I.q.Yt),this.h.Xs(y.I.q.$),this.h.Xs(y.I.q.O),this.h.Xs(y.I.q.K)),this.$s()}clearData(e){this.Ut=0,this.kt=0,this.Zt=[],this.yt.St(new w(this.Zt.slice(),null)),e&&(this.h.Xs(y.I.q.Yt),this.h.Xs(y.I.q.$),this.h.Xs(y.I.q.O),this.h.Xs(y.I.q.K),this.h.Xs(y.I.q.vs),this.h.Xs(y.I.q.ys))}Ts(){return!!this.gt.Ys()||(0!==this.gt.Zs()&&this.ti(),!1)}ti(){this.yt.St(new w([],(new Date).valueOf())),this.h.Xs(y.I.q.Yt)}}const D={t:!1,provider:null,er:()=>(D.o(),D.provider||(D.provider=new C(f.ZP.p(),f.ZP.l(),f.ZP.ir(),f.ZP.tr(),f.ZP.nr()),f.ZP.ar(D.provider)),D.provider),o:()=>{D.t||(f.ZP.u(D),D.t=!0)},destroy:()=>{D.provider=null,D.t=!1}},N=D;function P(e,t){if(f.ZP.rr())return N.er().Is(e,t)}class w extends p.Z{constructor(e,t){super(e,t)}getUnviewedCardCount(){return super.getUnreadCardCount()}logCardImpressions(e){(0,c.p)(e,!0)}logCardClick(e){(0,l.d)(e,!0)}sr(){P()}dr(){return!0}}function I(){if(f.ZP.rr())return N.er().Us(!1)}w.ur=6e4;var T=s(64095);function _(e){if(!f.ZP.rr())return;const t=document.querySelectorAll(".ab-feed");for(let s=0;s<t.length;s++)(null==e||null!=e&&t[s].parentNode===e)&&(0,T.tQ)(t[s])}var M=s(27406);function k(){if(f.ZP.rr())return(0,M.q)("logContentCardsDisplayed","method"),!0}function O(e){if(!f.ZP.rr())return;const t=N.er(),s=t.Ws(e);if(!t.Vt()){const e=f.ZP.mr().cr((()=>{t.Is()}));t.Xt(e)}return s}var U=s(35608),R=s(46959);function F(e,t){if(!f.ZP.rr())return;(0,R.B)();let s=!1;null==e&&(e=document.body,s=!0);const n=f.ZP.nn(f.JY.tn)||f.ZP.nn(f.JY.en)||!1;let i=N.er().Us(!1);"function"==typeof t&&(0,T.Of)(i,t(i.cards.slice()),i.lastUpdated,null,n);const r=(0,T.Yz)(i,n),o=N.er();(null==i.lastUpdated||(new Date).valueOf()-i.lastUpdated.valueOf()>w.ur)&&(null==o.Ht()||(new Date).valueOf()-o.Ht()>w.ur)&&(v.Z.D.info(`Cached content cards were older than max TTL of ${w.ur} ms, requesting an update from the server.`),(0,T.cV)(i,r),o.Qt((new Date).valueOf()));const a=(new Date).valueOf(),l=O((function(e){const s=r.querySelectorAll(".ab-refresh-button")[0];if(null!=s){let e=500;const t=parseInt(r.getAttribute(T.cP));isNaN(t)?e-=(new Date).valueOf()-a:e-=(new Date).valueOf()-t,setTimeout((function(){s.className=s.className.replace(/fa-spin/g,"")}),Math.max(e,0))}let o=e.cards;"function"==typeof t&&(o=t(o.slice())),(0,T.Of)(i,o,e.lastUpdated,r,n)}));(0,T.GB)(l,r);const u=function(e){const t=e.querySelectorAll(".ab-feed");let n=null;for(let s=0;s<t.length;s++)t[s].parentNode===e&&(n=t[s]);null!=n?((0,T.tQ)(n),n.parentNode.replaceChild(r,n)):e.appendChild(r),setTimeout((function(){r.className=r.className.replace("ab-hide","ab-show")}),0),s&&r.focus(),(0,T.cz)(i,r),(0,U.CG)(i.cards,e)};var c;null!=e?u(e):window.onload=(c=window.onload,function(){"function"==typeof c&&c(),u(document.body)})}function x(e,t){f.ZP.rr()&&(document.querySelectorAll(".ab-feed").length>0?_():F(e,t))}const B={GOOGLE_TAG_MANAGER:"gg",MPARTICLE:"mp",SEGMENT:"sg",TEALIUM:"tl",MANUAL:"manu",NPM:"npm",CDN:"wcd",SHOPIFY:"shp"};var L=s(72893);function G(e){if(f.ZP.rr()){if(!(0,L.kJ)(e))return v.Z.D.error("Cannot set SDK metadata because metadata is not an array."),!1;for(const t of e)if(!(0,L.fk)(B,t,"sdkMetadata contained an invalid value.","BrazeSdkMetadata"))return!1;return f.ZP.nr().addSdkMetadata(e),!0}}var q=s(34790);function z(){v.Z.D.info("Destroying Braze instance"),f.ZP.destroy(!0)}var $=s(12017);function j(){null!=f.ZP.mr()&&f.ZP.mr().requestImmediateDataFlush();const e=new y.Z.ne(null,!0);e.store(y.I.ae,"This-cookie-will-expire-in-"+e.ie());const t=v.Z.xt.Ft;new v.Z.qt(t,v.Z.D).setItem(t.$t.oe,t.se,!0),f.ZP.destroy(!1),f.ZP.le(!0)}function K(){new y.Z.ne(null,!0).remove(y.I.ae);const e=v.Z.xt.Ft;new v.Z.qt(e,v.Z.D).br(e.$t.oe,e.se),f.ZP.destroy(!1),f.ZP.le(!1)}function W(e){f.ZP.rr()&&(null==e&&v.Z.D.error("getDeviceId must be supplied with a callback. e.g., braze.getDeviceId(function(deviceId) {console.log('the device id is ' + deviceId)})"),"function"==typeof e&&e(f.ZP.ce().te().id))}var Y=s(46243);function J(e,t){return f.ZP.initialize(e,t)}function X(){return!!new y.Z.ne(null,!0).lr(y.I.ae)}var H=s(61454),V=s(61364),Q=s(24365),ee=s(22385);function te(){if(!f.ZP.rr())return;f.ZP.mr().openSession();const e=v.Z.xt.Ft,t=new v.Z.qt(e,v.Z.D);t.hr(e.$t.jr,(function(s,n){const i=n.lastClick,r=n.trackingString;v.Z.D.info(`Firing push click trigger from ${r} push click at ${i}`);const o=f.ZP.mr().kr(i,r),a=function(){ee.n.er().je(Q.Z.vr,[r],o)};f.ZP.mr().zr(a,a),t.br(e.$t.jr,s)})),t.Jt(e.$t.$r,(function(e){f.ZP.mr().wr(e)}))}function se(){f.ZP.rr()&&f.ZP.removeAllSubscriptions()}var ne=s(18503),ie=s(64650);function re(e){v.Z.D.setLogger(e)}var oe=s(3905);function ae(e){return!!f.ZP.rr()&&!(""===e||!(0,oe.ro)(e,"set signature","signature",!1))&&(f.ZP.ii().setSdkAuthenticationSignature(e),!0)}function le(e){if(f.ZP.rr())return f.ZP.ii().subscribeToSdkAuthenticationFailures(e)}function ue(){v.Z.D.toggleLogging()}function ce(){if(null==f.ZP.l())throw new Error("Braze must be initialized before calling methods.");f.ZP.l().clearData();const e=(0,L.XP)(v.Z.xt);for(let t=0;t<e.length;t++){const s=e[t],n=v.Z.xt[s];new v.Z.qt(n,v.Z.D).clearData()}if(f.ZP.rr())for(const e of f.ZP.re())e.clearData(!0)}var de=s(40420),he=s(83628),pe=s(30354);function fe(){if(f.ZP.rr())return pe.Z.er().Ti()}function me(){if(!f.ZP.rr())return;const e=document.querySelectorAll(".ab-feed");for(let t=0;t<e.length;t++)(0,T.tQ)(e[t])}var ge=s(46599),Ze=s(83516),be=s(33545),Ae=s(96596);function ve(e,t,s){f.ZP.rr()&&(document.querySelectorAll(".ab-feed").length>0?me():(0,be.showFeed)(e,t,s))}var ye=s(1792),Se=s(84072),Ee=s(98376),Ce=s(4410),De=s(31090),Ne=s(3811),Pe=s(26616),we=s(1087),Ie=s(44851),Te=s(11507),_e=s(5242),Me=s(20611),ke=s(27671);function Oe(e){if(!f.ZP.rr())return!1;if(!(e instanceof ye.Z||e instanceof Ee.Z))return v.Z.D.error(ke.De),!1;const t=e instanceof Ee.Z?v.Z.A.ro:v.Z.A.Mi;return we.Z.m().G(e,t).S}function Ue(e){if(!f.ZP.rr())return!1;if(!(e instanceof ye.Z))return v.Z.D.error(ke.De),!1;const t=we.Z.m().G(e,v.Z.A.Ii);if(t){e.Cr()||Oe(e);for(let s=0;s<t.ve.length;s++)ee.n.er().je(Q.Z.Mr,[e.triggerId],t.ve[s])}return t.S}var Re=s(73695);function Fe(e,t,s){if(!f.ZP.rr())return!1;if(!(e instanceof De.Z))return v.Z.D.error("inAppMessage argument to logInAppMessageHtmlClick must be an HtmlMessage object."),!1;let n=v.Z.A.Ii;null!=t&&(n=v.Z.A.Ai);const i=we.Z.m().G(e,n,t,s);if(i.S)for(let s=0;s<i.ve.length;s++)ee.n.er().je(Q.Z.Mr,[e.triggerId,t],i.ve[s]);return i.S}var xe=s(35806),Be=s(75319);function Le(e,t){if(!f.ZP.rr())return!1;if(!(e instanceof Se.Z))return v.Z.D.error("button must be an InAppMessageButton object"),!1;if(!(t instanceof ye.Z))return v.Z.D.error(ke.De),!1;const s=we.Z.m().ki(e,t);if(s.S)for(let n=0;n<s.ve.length;n++)ee.n.er().je(Q.Z.Mr,[t.triggerId,e.id],s.ve[n]);return s.S}var Ge=s(7429);const qe=e=>{const t=e.querySelectorAll(".ab-close-button, .ab-message-text, .ab-message-button");for(let e=0;e<t.length;e++)t[e].tabIndex=0;if(t.length>0){const s=t[0],n=t[t.length-1];e.addEventListener("keydown",(t=>{var i=document.activeElement;t.keyCode===Ge.m.oo&&(t.shiftKey||i!==n&&i!==e?!t.shiftKey||i!==s&&i!==e||(t.preventDefault(),n.focus()):(t.preventDefault(),s.focus()))}))}},ze=(e,t)=>{t.setAttribute("role","dialog"),t.setAttribute("aria-modal",!0),t.setAttribute("aria-label","Modal Message"),e&&t.setAttribute("aria-labelledby",e)},$e=(e,t,s,n)=>{if(e.buttons.length>0){const i=document.createElement("div");i.className="ab-message-buttons",s.appendChild(i);const r=s.getElementsByClassName("ab-message-text")[0];null!=r&&(r.className+=" ab-with-buttons");const o=i=>r=>(e.he(s,(()=>{Le(i,e),i.clickAction===ye.Z.ClickAction.URI?(0,de.S)(i.uri,r,n||e.openTarget===ye.Z.OpenTarget.BLANK):i.clickAction===ye.Z.ClickAction.NEWS_FEED&&t()})),r.stopPropagation(),!1);for(let t=0;t<e.buttons.length;t++){const s=e.buttons[t],n=document.createElement("button");n.className="ab-message-button",n.setAttribute("type","button"),(0,Te.lj)(n,"touchstart");let r=s.text;""===s.text&&(r=""),n.appendChild(document.createTextNode(r)),e.ye()||(n.style.backgroundColor=(0,Me.cg)(s.backgroundColor),n.style.color=(0,Me.cg)(s.textColor),n.style.borderColor=(0,Me.cg)(s.borderColor)),n.onclick=o(s),i.appendChild(n)}}};function je(e,t,n){if(!f.ZP.rr())return;if((0,Ie.R)(),null==e)return!1;if(e instanceof Ee.Z)return v.Z.D.info("User received control for a multivariate test, logging to Braze servers."),Oe(e),!0;if(!(e instanceof ye.Z))return!1;const i=we.Z.m();e.Ah();const r=e instanceof De.Z;if(r&&!e.trusted&&!f.ZP.tr())return v.Z.D.error('HTML in-app messages are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable these messages.'),i.Ye(e.triggerId,ye.Z.Me.Oh),!1;if(null==t&&(t=document.body),e.xe()&&t.querySelectorAll(".ab-modal-interactions").length>0)return v.Z.D.info(`Cannot show in-app message ${e.message} because another message is being shown.`),i.Ye(e.triggerId,ye.Z.Me.ze),!1;if(Be.SD.so()){const t=Be.SD.io();if(t===Be.eh.PORTRAIT&&e.orientation===ye.Z.Orientation.LANDSCAPE||t===Be.eh.LANDSCAPE&&e.orientation===ye.Z.Orientation.PORTRAIT){const s=t===Be.eh.PORTRAIT?"portrait":"landscape",n=e.orientation===ye.Z.Orientation.PORTRAIT?"portrait":"landscape";return v.Z.D.info(`Not showing ${n} in-app message ${e.message} because the screen is currently ${s}`),i.Ye(e.triggerId,ye.Z.Me.Sh),!1}}if(!f.ZP.tr()){let t=!1;if(e.buttons&&e.buttons.length>0){const s=e.buttons;for(let e=0;e<s.length;e++)if(s[e].clickAction===ye.Z.ClickAction.URI){const n=s[e].uri;t=(0,b.o)(n)}}else e.clickAction===ye.Z.ClickAction.URI&&(t=(0,b.o)(e.uri));if(t)return v.Z.D.error('Javascript click actions are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable these actions.'),i.Ye(e.triggerId,ye.Z.Me.Oh),!1}const o=document.createElement("div");if(o.className="ab-iam-root v3",o.className+=function(e){let t="";return e.animateIn&&(t+=" ab-animate-in"),e.animateOut&&(t+=" ab-animate-out"),e instanceof Ce.Z?t+=" ab-effect-fullscreen":e instanceof De.Z?t+=" ab-effect-html":e instanceof Ne.Z?t+=" ab-effect-modal":e instanceof Pe.Z&&(t+=" ab-effect-slide"),t}(e),o.setAttribute("role","complementary"),e.Ee()&&(o.id=e.htmlId),f.ZP.nn(f.JY.no)&&(o.style.zIndex=f.ZP.nn(f.JY.no)+1),t.appendChild(o),e.ye()){const t=document.createElement("style");t.innerHTML=e.css,t.id=e.Ae(),null!=f.ZP.nn(f.JY.ao)&&t.setAttribute("nonce",f.ZP.nn(f.JY.ao)),document.getElementsByTagName("head")[0].appendChild(t)}const a=e instanceof Pe.Z,l=function(e,t,n,i,r,o,a){if(e.ke=document.activeElement,e instanceof De.Z)return function(e,t,n,i,r,o){const a=document.createElement("iframe");a.setAttribute("title","Modal Message"),r&&(a.style.zIndex=r+1);const l=t=>{const s=t.getAttribute("href"),n=t.onclick;return r=>{if(null!=n&&"function"==typeof n&&!1===n())return;let o=(0,b.L)(s).abButtonId;if(null!=o&&""!==o||(o=t.getAttribute("id")),null!=s&&""!==s&&0!==s.indexOf("#")){const n="blank"===(t.getAttribute("target")||"").toLowerCase().replace("_",""),l=i||e.openTarget===ye.Z.OpenTarget.BLANK||n,u=()=>{Fe(e,o,s),Be.SD.openUri(s,l,r)};l?u():e.he(a,u)}else Fe(e,o,s);return r.stopPropagation(),!1}},u=(e,t,s)=>{const n=`([\\w]+)\\s*=\\s*document.createElement\\(['"]${s}['"]\\)`,i=e.match(new RegExp(n));if(i){const s=`${i[1]}.setAttribute("nonce", "${t}")`;return`${e.slice(0,i.index+i[0].length)};${s};${e.slice(i.index+i[0].length)}`}return null};if(a.onload=()=>{let i=null;if(null!=o){i=document.createElement("html"),i.innerHTML=e.message;const t=i.getElementsByTagName("style");for(let e=0;e<t.length;e++)t[e].setAttribute("nonce",o);const s=i.getElementsByTagName("script");for(let e=0;e<s.length;e++){s[e].setAttribute("nonce",o),s[e].innerHTML=s[e].innerHTML.replace(/<style>/g,`<style nonce='${o}'>`);const t=u(s[e].innerHTML,o,"script");t&&(s[e].innerHTML=t);const n=u(s[e].innerHTML,o,"style");n&&(s[e].innerHTML=n)}}a.contentWindow.focus(),a.contentWindow.document.write(i?i.innerHTML:e.message);const r=a.contentWindow.document.getElementsByTagName("head")[0];if(null!=r){if((0,Ie.D)(r),e.ye()){const t=document.createElement("style");t.innerHTML=e.css,t.id=e.Ae(),null!=o&&t.setAttribute("nonce",o),r.appendChild(t)}const t=a.contentWindow.document.createElement("base");t.setAttribute("target","_parent"),r.appendChild(t)}const c=a.contentWindow.document.getElementsByTagName("title");c.length>0&&a.setAttribute("title",c[0].textContent);const d={closeMessage:function(){e.he(a)},logClick:function(){const t=[e,...arguments];Fe.apply(e,Array.prototype.slice.call(t))},display:{},web:{}},h=function(){return function(){const e=arguments;Promise.resolve().then(s.bind(s,12261)).then((t=>{t.requestPushPermission.apply(null,Array.prototype.slice.call(e))}))}},p={requestImmediateDataFlush:function(){const e=arguments;Promise.resolve().then(s.bind(s,64650)).then((({requestImmediateDataFlush:t})=>{t.apply(null,Array.prototype.slice.call(e))}))},logCustomEvent:function(){const e=arguments;Promise.resolve().then(s.bind(s,61454)).then((({logCustomEvent:t})=>{t.apply(null,Array.prototype.slice.call(e))}))},logPurchase:function(){const e=arguments;Promise.resolve().then(s.bind(s,61364)).then((({logPurchase:t})=>{t.apply(null,Array.prototype.slice.call(e))}))},unregisterPush:function(){const e=arguments;Promise.resolve().then(s.bind(s,77824)).then((({unregisterPush:t})=>{t.apply(null,Array.prototype.slice.call(e))}))},requestPushPermission:h(),changeUser:function(){const e=arguments;Promise.resolve().then(s.bind(s,34790)).then((({changeUser:t})=>{t.apply(null,Array.prototype.slice.call(e))}))}},f=function(e){return function(){p[e].apply(null,Array.prototype.slice.call(arguments))}};for(const e of(0,L.XP)(p))d[e]=f(e);const m=["setFirstName","setLastName","setEmail","setGender","setDateOfBirth","setCountry","setHomeCity","setEmailNotificationSubscriptionType","setLanguage","addAlias","setPushNotificationSubscriptionType","setPhoneNumber","setCustomUserAttribute","addToCustomAttributeArray","removeFromCustomAttributeArray","incrementCustomUserAttribute","setCustomLocationAttribute","addToSubscriptionGroup","removeFromSubscriptionGroup"],g=function(e){return function(){const t=(0,Y.P)();t[e].apply(t,Array.prototype.slice.call(arguments))}},Z={};for(let e=0;e<m.length;e++)Z[m[e]]=g(m[e]);d.getUser=function(){return Z};const b={showFeed:t},A=function(t){return function(){const s=arguments;e.he(a,(function(){b[t].apply(null,Array.prototype.slice.call(s))}))}};for(const e of(0,L.XP)(b))d.display[e]=A(e);const v={registerAppboyPushMessages:h()},y=function(e){return function(){v[e].apply(null,Array.prototype.slice.call(arguments))}};for(const e of(0,L.XP)(v))d.web[e]=y(e);if(a.contentWindow.appboyBridge=d,a.contentWindow.brazeBridge=d,e.Ce!==ye.Z.es.Pe){const e=a.contentWindow.document.getElementsByTagName("a");for(let t=0;t<e.length;t++)e[t].onclick=l(e[t]);const t=a.contentWindow.document.getElementsByTagName("button");for(let e=0;e<t.length;e++)t[e].onclick=l(t[e])}const S=a.contentWindow.document.body;if(null!=S){e.Ee()&&(S.id=e.htmlId);const t=document.createElement("hidden");t.onclick=d.closeMessage,t.className="ab-programmatic-close-button",S.appendChild(t)}a.contentWindow.dispatchEvent(new CustomEvent("ab.BridgeReady")),-1!==a.className.indexOf("ab-start-hidden")&&(a.className=a.className.replace("ab-start-hidden",""),n(a)),document.activeElement!==a&&a.focus()},a.className="ab-in-app-message ab-start-hidden ab-html-message ab-modal-interactions",Re.Z.OS===xe.T.$e){const t=document.createElement("div");return t.className="ab-ios-scroll-wrapper",t.appendChild(a),e.qe=t,t}return e.qe=a,a}(e,t,n,r,o,a);const l=function(e,t,s,n,i,r){const o=document.createElement("div");o.className="ab-in-app-message ab-start-hidden ab-background",r&&(o.style.zIndex=r+1),e.xe()&&(o.className+=" ab-modal-interactions",o.setAttribute("tabindex","-1")),e.ye()||(o.style.color=(0,Me.cg)(e.textColor),o.style.backgroundColor=(0,Me.cg)(e.backgroundColor),(0,Me.Qm)(e.backgroundColor)&&(o.className+=" ab-no-shadow"));const a=()=>{-1!==o.className.indexOf("ab-start-hidden")&&(o.className=o.className.replace("ab-start-hidden",""),document.querySelectorAll(".ab-iam-img-loading").length>0?n(`Cannot show in-app message ${e.message} because another message is being shown.`,ye.Z.Me.ze):s(o))},l=()=>{const e=document.querySelectorAll(".ab-iam-root");e&&e.length>0&&(e[0].classList.remove("ab-iam-img-loading"),a())};e.imageStyle===ye.Z.ImageStyle.GRAPHIC&&(o.className+=" graphic"),e.orientation===ye.Z.Orientation.LANDSCAPE&&(o.className+=" landscape"),0===e.buttons.length&&(e.clickAction!==ye.Z.ClickAction.NONE&&(o.className+=" ab-clickable"),o.onclick=s=>(e.he(o,(()=>{Ue(e),e.clickAction===ye.Z.ClickAction.URI?(0,de.S)(e.uri,s,i||e.openTarget===ye.Z.OpenTarget.BLANK):e.clickAction===ye.Z.ClickAction.NEWS_FEED&&t()})),s.stopPropagation(),!1));const u=(0,_e.B)("Close Message",e.ye()?void 0:(0,Me.cg)(e.closeButtonColor),(()=>{e.he(o)}));o.appendChild(u),r&&(u.style.zIndex=r+2);const c=document.createElement("div");c.className="ab-message-text";const d=(e.messageAlignment||e.Le).toLowerCase();c.className+=" "+d+"-aligned";let h=!1;const p=document.createElement("div");if(p.className="ab-image-area",e.imageUrl){if(e.cropType===ye.Z.CropType.CENTER_CROP){const t=document.createElement("span");t.className="ab-center-cropped-img",t.style.backgroundImage="url("+e.imageUrl+")",t.setAttribute("role","img"),t.setAttribute("aria-label","Modal Image"),e.Ie(t),p.appendChild(t)}else{const t=document.createElement("img");if(t.setAttribute("src",e.imageUrl),e.Ie(t),0===document.querySelectorAll(".ab-iam-img-loading").length){h=!0;const e=document.querySelectorAll(".ab-iam-root");e&&e.length>0&&e[0].classList.add("ab-iam-img-loading"),t.onload=l}setTimeout(a,1e3),p.appendChild(t)}o.appendChild(p),c.className+=" ab-with-image"}else if(e.icon){p.className+=" ab-icon-area";const t=document.createElement("span");t.className="ab-icon",e.ye()||(t.style.backgroundColor=(0,Me.cg)(e.iconBackgroundColor),t.style.color=(0,Me.cg)(e.iconColor));const s=document.createElement("i");s.className="fa",s.appendChild(document.createTextNode(e.icon)),s.setAttribute("aria-hidden",!0),t.appendChild(s),p.appendChild(t),o.appendChild(p),c.className+=" ab-with-icon"}if((0,Te.lj)(c,"touchstart"),e.header&&e.header.length>0){const t=document.createElement("h1");t.className="ab-message-header",e.Te=v.Z.it.nt(),t.id=e.Te;const s=(e.headerAlignment||ye.Z.TextAlignment.CENTER).toLowerCase();t.className+=" "+s+"-aligned",e.ye()||(t.style.color=(0,Me.cg)(e.headerTextColor)),t.appendChild(document.createTextNode(e.header)),c.appendChild(t)}return c.appendChild(e.Be()),o.appendChild(c),h||a(),e.qe=o,o}(e,t,n,i,r,o);if(e instanceof Ce.Z||e instanceof Ne.Z){const s=e instanceof Ce.Z?"ab-fullscreen":"ab-modal";l.className+=` ${s} ab-centered`,$e(e,t,l,r),qe(l),ze(e.Te,l)}else if(e instanceof Pe.Z){l.className+=" ab-slideup";const t=l.getElementsByClassName("ab-close-button")[0];if(null!=t){const s=(0,Te.MK)("0 0 11.38 19.44","M11.38 9.72l-9.33 9.72L0 17.3l7.27-7.58L0 2.14 2.05 0l9.33 9.72z",e.ye()?void 0:(0,Me.cg)(e.closeButtonColor));s.setAttribute("class","ab-chevron"),t.appendChild(s)}let s,n;(0,Te.FZ)(l,Te.mQ.ot,(e=>{l.className+=" ab-swiped-left",t.onclick(e)})),(0,Te.FZ)(l,Te.mQ.et,(e=>{l.className+=" ab-swiped-right",t.onclick(e)})),e.slideFrom===ye.Z.SlideFrom.TOP?(s=Te.mQ.Je,n=" ab-swiped-up"):(s=Te.mQ.Ke,n=" ab-swiped-down"),(0,Te.FZ)(l,s,(e=>{l.className+=n,t.onclick(e)}))}return l}(e,(()=>{Promise.resolve().then(s.bind(s,33545)).then((e=>e.showFeed()))}),(t=>{if(e.xe()&&e.ll()){const s=document.createElement("div");if(s.className="ab-page-blocker",e.ye()||(s.style.backgroundColor=(0,Me.cg)(e.frameColor)),f.ZP.nn(f.JY.no)&&(s.style.zIndex=f.ZP.nn(f.JY.no)),o.appendChild(s),!f.ZP.nn(f.JY.Ih)){const n=(new Date).valueOf();s.onclick=s=>{(new Date).valueOf()-n>ye.Z.Ph&&(e.he(t),s.stopPropagation())}}o.appendChild(t),t.focus(),e.Th(o)}else if(a){const s=document.querySelectorAll(".ab-slideup");let n=null;for(let e=s.length-1;e>=0;e--)if(s[e]!==t){n=s[e];break}if(e.slideFrom===ye.Z.SlideFrom.TOP){let e=0;null!=n&&(e=n.offsetTop+n.offsetHeight),t.style.top=Math.max(e,0)+"px"}else{let e=0;null!=n&&(e=(window.innerHeight||document.documentElement.clientHeight)-n.offsetTop),t.style.bottom=Math.max(e,0)+"px"}}else if(r&&!f.ZP.nn(f.JY.Ih)){const s=e;t.contentWindow.addEventListener("keydown",(function(e){e.keyCode===Ge.m.mh&&s.closeMessage()}))}Oe(e),e.dismissType===ye.Z.DismissType.AUTO_DISMISS&&setTimeout((()=>{o.contains(t)&&e.he(t)}),e.duration),"function"==typeof n&&n()}),((t,s)=>{v.Z.D.info(t),i.Ye(e.triggerId,s)}),f.ZP.nn(f.JY.lo),f.ZP.nn(f.JY.no),f.ZP.nn(f.JY.ao));return(r||a)&&(o.appendChild(l),e.Th(o)),!0}function Ke(e){if(f.ZP.rr())return"function"!=typeof e?null:we.Z.m().Ue((function(t){return e(t[0]),t.slice(1)}))}function We(){if(!f.ZP.rr())return;(0,Ie.R)();const e=we.Z.m();if(null==e.Ve()){const t=Ke((e=>je(e)));e.Xe(t)}return e.Ve()}var Ye=s(74556);function Je(){if(f.ZP.rr())return Ye.Z.isPushBlocked()}function Xe(){if(f.ZP.rr())return Ye.Z.isPushPermissionGranted()}function He(){if(f.ZP.rr())return Ye.Z.isPushSupported()}var Ve=s(12261),Qe=s(77824),et=s(17615),tt=s(12962),st=s(992),nt=s(12611);function it(e){if(!f.ZP.rr())return;const t=f.ZP.ir();if(t&&!t.ci())return v.Z.D.info("Feature flags are not enabled."),new tt.Z(e);const s=nt.Z.er().pi();return s[e]?s[e]:new tt.Z(e)}function rt(e){if(f.ZP.rr())return nt.Z.er().Ws(e)}function ot(){if(!f.ZP.rr())return;const e=[],t=f.ZP.ir();if(t&&!t.ci())return v.Z.D.info("Feature flags are not enabled."),e;const s=nt.Z.er().pi();for(const t in s)e.push(s[t]);return e}}}]);